var ldv=angular.module("ldv",["ldv.services","ldv.controller","ldv.table","ldv.ui","ldv.pretty"]),LDViewer={};LDViewer.configure=function(a){LDViewer.customConfigFunction=a},LDViewer.doConfigure=function(){LDViewer.customConfigFunction()},ldv.config(["$routeProvider","$locationProvider",function(a){a.when("/search/:q",{templateUrl:"/tpl/search.html",controller:"SearchCtrl"}).when("/resource/:page",{redirectTo:function(a){return"/page/"+a.page}}).when("/:a/:b",{templateUrl:"/tpl/entity.html",controller:"MetaCtrl"}).when("/:a/:b/:c",{templateUrl:"/tpl/entity.html",controller:"MetaCtrl"}).when("/:a/:b/:c/:d/:e",{templateUrl:"/tpl/entity.html",controller:"MetaCtrl"}).otherwise({redirectTo:"/resource/404"})}]),ldv.run(["$rootScope",function(a){a.$watch("localgraph",function(b){a.endpointgraph=[b]}),LDViewer.setConfig=function(b,c){a[b]=c},LDViewer.getConfig=function(b){return a[b]},a.iconpath="/css/200px-dbpedia.png",a.loadFailed=function(b){a.failMessage=b},a.$watch("failMessage",function(a){a&&a.length>1&&LDViewer.addNotification(a,1e4)});var b=$.cookie();for(var c in b){var d="dbpv_setting_";if(c.slice(0,d.length)==d){var e=b[c];"true"==e&&(e=!0),"false"==e&&(e=!1),a[c.slice(d.length,c.length)]=e}}}]),LDViewer.configuration=function(){LDViewer.setConfig("previewMappings",{label:"http://www.w3.org/2000/01/rdf-schema#label",thumbnail:"http://dbpedia.org/ontology/thumbnail",description:"http://www.w3.org/2000/01/rdf-schema#comment",properties:{Domain:"http://www.w3.org/2000/01/rdf-schema#domain",Range:"http://www.w3.org/2000/01/rdf-schema#range",Superclass:"http://www.w3.org/2000/01/rdf-schema#subClassOf"}}),LDViewer.setConfig("prefixes",{"http://dbpedia.org/resource/":"dbpedia","http://www.w3.org/1999/02/22-rdf-syntax-ns#":"rdf","http://www.w3.org/2000/01/rdf-schema#":"rdfs","http://xmlns.com/foaf/0.1/":"foaf","http://dbpedia.org/ontology/":"dbpedia-owl","http://dbpedia.org/property/":"dbpprop","http://dbpedia.org/resource/Category:":"category","http://dbpedia.org/class/yago/":"yago","http://www.w3.org/2001/XMLSchema#":"xsd","http://linkedgeodata.org/ontology/":"lgdo","http://linkedgeodata.org/meta/":"lgd-meta","http://linkedgeodata.org/geometry/":"lgd-geometry","http://linkedgeodata.org/triplify/":"lgd-triplify","http://linkedgeodata.org/":"lgd","http://www.w3.org/2002/07/owl#":"owl"}),LDViewer.setConfig("entitySemaphore",0),LDViewer.setConfig("localprefix","#"),LDViewer.setConfig("godmode",!1),LDViewer.setConfig("localgraph","http://dbpedia.org"),LDViewer.setConfig("endpointgraph",[]),LDViewer.setConfig("endpoint","http://dbpedia.org/sparql"),LDViewer.setConfig("encodegraph",!0),LDViewer.setConfig("owlgraph","http://dbpedia.org"),LDViewer.setConfig("owlendpoint","http://dbpedia.org/sparql"),LDViewer.setConfig("lookupgraph","http://dbpedia.org"),LDViewer.setConfig("lookupendpoint","http://lookup.dbpedia.org/api/search"),LDViewer.setConfig("primarylang","en"),LDViewer.setConfig("fallbacklang","en"),LDViewer.setConfig("labelPrefs",["http://www.w3.org/2000/01/rdf-schema#label"]),LDViewer.setConfig("showLabels",!0),LDViewer.setConfig("templateStr","Template")},angular.module("ldv.controller",["ldv.services.UrlService"]).controller("MetaCtrl",["$rootScope","$scope","$routeParams","$filter","$timeout","$http","$compile","$location","UrlService",function(a,b,c,d,e,f,g,h,i){LDViewer.configure(LDViewer.configuration),LDViewer.doConfigure(),LDViewer.about=function(c){return void 0===c?b.about:void(a.about=c)},"page"==c.a&&(c.a="resource");var j=i.processResource(c);LDViewer.about({uri:j}),LDViewer.http=f,delete f.defaults.headers.common["X-Requested-With"],LDViewer.compile=g,b.loadFail=function(){LDViewer.addNotification("Loading failed.",1e4)},b.noInfo=function(){LDViewer.addNotification("No information about this resource available.",1e4)},LDViewer.preprocess_triple_url=function(a){return i.makeUrl(a).uri}}]),angular.module("ldv.pretty.links",[]).directive("prettyLinks",function(){return{restrict:"EA",transclude:!1,replace:!0,scope:{links:"="},template:'<div id="dbpvplinks">			<div ng-repeat="(label, list) in links" style="float:left;margin-right: 15px;">				<div ng-show="list.length>1" >					<a role="button" href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown">{{label}} <span class="glyphicon glyphicon-chevron-down" style="font-size:0.6em;"></span></a>					<ul class="dropdown-menu">						<li ng-repeat="link in list"><a target="_blank" href="{{link.uri}}">{{link.plex}}</a></li>									</ul>				</div>				<div ng-show="list.length==1">					<a target="_blank" href="{{list[0].uri}}">{{list[0].plex}}</a>				</div>			</div>		</div>'}}),angular.module("ldv.pretty.list",["ldv.table.displayNode"]).directive("dbpvpList",function(){return{restrict:"EA",transclude:!1,replace:!0,scope:{properties:"=",primarylang:"=",fallbacklang:"="},template:'<div id="dbpvpproperties" ng-show="showProperties()"><table id="dbpvplist"><tr ng-repeat="property in properties | orderBy:prioSort" class="propertyentry"><td class="propertykey">{{property.key}}:</td><td  class="propertyvalues"><div ng-repeat="value in property.values"><div display-node node="value" settings="displayset" class="propertyvalue" primarylang="primarylang" fallbacklang="fallbacklang"></div></div></div></td></tr></table></div>',controller:"DbpvpListCtrl"}}).controller("DbpvpListCtrl",["$scope",function(a){a.showProperties=function(){return a.properties.length>0},a.displayset={noprefix:!0},a.prioSort=function(a){return a&&a.priority?a.priority:0},LDViewer.getPrettyPropertyAdder=function(b,c){if(b&&b.length&&b.length>0){for(var d=null,e=0;e<a.properties.length;e++)if(a.properties[e].key==b){d=a.properties[e];break}if(d||(d={},d.key=b,d.values=[],a.properties.push(d)),d)return d.priority=c,function(a){a&&d.values.push(a)}}}}]),angular.module("ldv.pretty.map",[]).directive("dbpvpMap",function(){return{restrict:"EA",transclude:!1,replace:!0,template:'<div id="dbpvpmapcontainer" class="top-block"><div id="dbpvpmap"></div></div>',scope:{},controller:"DbpvpMapCtrl"}}).controller("DbpvpMapCtrl",["$scope",function(a){LDViewer.setMapCoord=function(b){void 0===a.lon&&(a.lon=b[1],a.lat=b[0],a.updateCoords())},a.updateCoords=function(){a.lon&&a.lat&&($("#dbpvpmap").attr("class","dbpvpmap-active"),void 0===a.mapview&&(a.mapview=L.map("dbpvpmap"),L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:"<a href='http://osm.org/copyright'>&copy;</a>"}).addTo(a.mapview)),a.mapview.setView([a.lon,a.lat],10),void 0===a.micon&&(a.micon=L.icon({iconUrl:"/css/marker-icon.png",shadowUrl:"/css/marker-shadow.png",iconSize:[25,41],shadowSize:[41,41],iconAnchor:[13,40],shadowAnchor:[13,40],popupAnchor:[-3,-50]})),void 0===a.marker?(a.marker=L.marker([a.lon,a.lat],{icon:a.micon}),a.marker.addTo(a.mapview)):a.marker.setLatLng([a.lon,a.lat]))}}]),angular.module("ldv.pretty.types",["ldv.preview","ldv.filters","ldv.services.preview","ldv.services.UrlService"]).directive("prettyTypes",function(){return{restrict:"EA",transclude:!1,replace:!0,scope:{types:"=",primarylang:"=",fallbacklang:"=",owlgraph:"=",owlendpoint:"="},template:'<div id="dbpvptypes" ng-show="types.length>0"><span class="dbpvptype" ng-repeat="type in types"><span pretty-type node="type" primarylang="primarylang" fallbacklang="fallbacklang" owlgraph="owlgraph" owlendpoint="owlendpoint"></span><span class="comma">, </span></span></div>',controller:"PrettyTypesCtrl"}}).controller("PrettyTypesCtrl",["$scope",function(a){a.$watch("types",function(){console.log("types changed")},!0)}]).directive("prettyType",function(){return{restrict:"EA",transclude:!1,replace:!1,scope:{node:"=",primarylang:"=",fallbacklang:"=",owlgraph:"=",owlendpoint:"="},template:'<span><a href="{{url}}" dbpv-preview>{{label}}</a></span>',controller:"PrettyTypeCtrl"}}).controller("PrettyTypeCtrl",["$scope","$filter","Preview","UrlService",function(a,b,c,d){var e=a.node.uri;a.label=a.node.uri;var f=d.prefixify(a.node.uri),g=d.makeUrl(a.node.uri);e=g.uri;var h="";void 0!==f&&f.length>1&&(a.url=e,a.label=f[1],h='<a href="'+e+'" dbpv-preview>'+a.label+"</a>",a.nodedisplay=h),a.labellist=c.getProperty(a.node.uri,"http://www.w3.org/2000/01/rdf-schema#label",a,"",a.owlendpoint),a.updateLabel=function(c){var d=b("languageFilter")(c,a.primarylang,a.fallbacklang)[0];void 0!==d&&(d=d.literalLabel.lex,a.label=d)},a.$watch("labellist",function(){a.updateLabel(a.labellist)},!0),a.$watch("primarylang",function(){a.updateLabel(a.labellist)})}]),angular.module("ldv.pretty",["ldv.pretty.types","ldv.pretty.links","ldv.pretty.list","ldv.pretty.map","ldv.filters"]).directive("prettyBox",function(){return{restrict:"EA",transclude:!1,replace:!0,scope:{about:"=",primarylang:"=",fallbacklang:"=",owlgraph:"=",owlendpoint:"="},template:'	<div><div id="dbpvpthumbnail"><img ng-src="{{dbpvp.thumbnail[0].uri}}"></img>	</div>	<div id="dbpvptext">		<div id="dbpvplabel">			<span ng-repeat="value in dbpvp.label |languageFilter:primarylang:fallbacklang">				<a href="{{about.uri}}">{{value.literalLabel.lex}}</a>			</span>		</div>		<div pretty-types types="dbpvp.types" primarylang="primarylang" fallbacklang="fallbacklang" owlgraph="owlgraph" owlendpoint="owlendpoint"></div>		<div id="dbpvpdescription">			<span ng-repeat="value in dbpvp.description |languageFilter:primarylang:fallbacklang">				{{value.literalLabel.lex}}			</span>		</div>		<div pretty-links links="dbpvp.links"></div> <div dbpvp-list properties="dbpvp.properties" primarylang="primarylang" fallbacklang="fallbacklang"></div><div id="loading" ng-show="entitySemaphore>0">			<center><img style="margin-bottom:15px;" src="/statics/css/ajax-loader.gif"></img></center>		</div>	</div></div>',controller:"PrettyBoxCtrl"}}).controller("PrettyBoxCtrl",["$scope","$rootScope",function(a,b){LDViewer.applyPrettyBox=function(b){b(a.dbpvp)},a.entitySemaphore=b.entitySemaphore,a.dbpvp={},a.dbpvp.properties=[]}]),angular.module("ldv.services.UrlService",[]).factory("UrlService",["$rootScope",function(a){return{localgraph:function(){return a.localgraph},endpointgraph:function(){return a.endpointgraph},endpoint:function(){return a.endpoint},primarylang:function(){return a.primarylang},fallbacklang:function(){return a.fallbacklang},localUrl:function(b){return void 0!==a.localgraph&&void 0!==a.localprefix&&b.uri.slice(0,a.localgraph.length)==a.localgraph},makeUrl:function(b){var c={uri:b};return this.localUrl(c)&&(c.uri=c.uri.slice(a.localgraph.length,c.uri.length),c.uri="/"+a.localprefix+c.uri,c.local=!0),a.godmode&&(c.uri="/"+a.localprefix+"/"+b),c},defaultUri:function(b){void 0!=a.localprefix&&b.slice(0,a.localprefix.length)==a.localprefix&&(b=b.slice(a.localprefix.length,b.length));var c="http://";return void 0!==a.localgraph&&b.slice(0,c.length)==c?b:a.localgraph+b},prefixify:function(b){if(void 0!==b&&null!==b)for(var c in a.prefixes)if(b.slice(0,c.length)==c)return pref=a.prefixes[c],shor=b.slice(c.length,b.length),[pref,shor]},processResource:function(b){var c="";if(a.godmode){var d=b.a,e=b.b;if(""!=e)return a.localgraph+this.processLocalResource(b);for(var f=b.c,c="/"+b.d,g=["e","f","g","h","i"],h=0;h<g.length;h++){var i=g[h];void 0!==b[i]&&(c+="/"+b[i])}a.localgraph=d+"//"+f,a.endpointgraph=[a.localgraph],a.endpoint=a.localgraph+"/sparql",a.owlgraph=a.localgraph,a.owlendpoint=a.endpoint}else c=this.processLocalResource(b);return a.localgraph+c},processLocalResource:function(a){for(var b="",c=["a","b","c","d","e","f","g","h","i"],d=0;d<c.length;d++){var e=c[d];void 0!==a[e]&&(b+="/"+a[e])}return b}}}]),angular.module("ldv.services.entity",["ldv.services.UrlService","ldv.services.jassa"]).factory("Entity",["$rootScope","UrlService","$q","JassaService",function(a,b,c,d){return{triples:function(a,c,e){void 0===e&&(e=!1);var f=a,g=Jassa.rdf,h=$("[about]").attr("about"),i="";e?i="SELECT DISTINCT ?p ?s WHERE {?su ?p <"+f+"> .FILTER (?p != <http://www.w3.org/1999/02/22-rdf-syntax-ns#type>). {SELECT ?s WHERE {?s ?p <"+f+">} LIMIT 3 } }":(i="SELECT DISTINCT * where {<"+f+"> ?p ?o}",labelqueries=["SELECT DISTINCT ?p as ?x ?pl ?l WHERE { ?p ?pl ?l . {"+i+"}","SELECT DISTINCT ?o as ?x ?pl ?l WHERE { ?o ?pl ?l . {"+i+"}"]);var j=this.assignLabels,k=LDViewer.addStatus("Fetching data",'<span class="glyphicon glyphicon-download-alt"></span>'),l=d.select(i,b.endpoint(),b.endpointgraph()).then(function(a){var b=[],c={};k&&k.delete();for(var d=g.NodeFactory.createVar("s"),f=g.NodeFactory.createVar("p"),i=g.NodeFactory.createVar("o");a.hasNext();){var l=a.nextBinding(),m=l.get(f);b.push(m);var n=m.uri,o={};e?(o=l.get(d),n="o-"+n,m.forward=!1):(o=l.get(i),n="i-"+n,m.forward=!0),b.push(o);{var p=h;new g.Triple(p,m,o)}if(void 0===c[n]){c[n]=m;var q=c[n];q.predid=n,q.values=[]}q.values.push(o)}j(labelqueries,b),console.log("LOADED INQE");var r={};return r.predicates=c,r.labelnodes=b,r.labelqueries=labelqueries,c},function(a){return k&&k.delete(),a},function(a){return a});return l},assignLabels:function(e,f){if(console.log("assigning labels"),a.showLabels)for(var g=Jassa.rdf,h=a.labelPrefs,i=LDViewer.addStatus("Fetching labels",'<span class="glyphicon glyphicon-download-alt"></span>'),j=[],k=0;k<e.length;k++){query=e[k],query+=". FILTER(";for(var l=0;l<h.length;l++){var m="(?pl = <"+h[l]+">)";l<h.length-1&&(m+=" || "),query+=m}query+=")}",console.log(query);var n=d.select(query,b.endpoint(),b.endpointgraph()).then(function(a){for(var b={},c=g.NodeFactory.createVar("x"),d=g.NodeFactory.createVar("pl"),e=g.NodeFactory.createVar("l");a.hasNext();){var i=a.nextBinding(),j=i.get(e),k=i.get(d).uri,l=i.get(c).uri;b[l]||(b[l]=[]),b[l][k]||(b[l][k]=[]),b[l][k].push(j)}for(var m in b){for(var n=null,o=0;o<h.length;o++){var p=b[m];for(var q in p)if(h[o]==q){n=p[q];break}if(n)break}n&&(b[m]=n)}for(var r=0;r<f.length;r++){var s=f[r];if(s.uri&&b[s.uri]){var n=b[s.uri];n&&n.length>0&&(s.labelNodes=n)}}},function(){i&&i.delete()});j.push(n),c.all(j).then(function(){i&&i.delete()})}},reversePredicates:function(a){var c=Jassa.rdf,e="SELECT DISTINCT ?p WHERE {?s ?p <"+a+">.}",f=["SELECT DISTINCT ?p as ?x ?pl ?l WHERE { ?p ?pl ?l . {"+e+"}"],g=this.assignLabels,h=LDViewer.addStatus("Fetching reverse predicates",'<span class="glyphicon glyphicon-download-alt"></span>');return d.select(e,b.endpoint(),b.endpointgraph()).then(function(b){var d={};h&&h.delete();for(var e=c.NodeFactory.createVar("p"),i=[];b.hasNext();){var j=b.nextBinding(),k=j.get(e);i.push(k);var l=k.uri,m={};m={},l="o-"+l,k.forward=!1;{var n=a;new c.Triple(n,k,m)}if(void 0===d[l]){d[l]=k;var o=d[l];o.predid=l,o.values=[]}}return g(f,i),console.log("LOADED INQE"),d},function(){h&&h.delete()},function(){})},loadReverseValues:function(a,c,e,f){var g=Jassa.rdf,h="SELECT ?s WHERE {?s <"+c.uri+"> <"+a.uri+">} LIMIT "+e+" OFFSET "+f,i=["SELECT DISTINCT ?s as ?x ?pl ?l WHERE { ?s ?pl ?l . {"+h+"}"],j=this.assignLabels,k=LDViewer.addStatus("Fetching data",'<span class="glyphicon glyphicon-download-alt"></span>');return d.select(h,b.endpoint(),b.endpointgraph()).then(function(a){k&&k.delete();for(var b=g.NodeFactory.createVar("s"),c=[],d=[];a.hasNext();){var e=a.nextBinding(),f=e.get(b);d.push(f),c.push(f)}return j(i,d),c},function(){k&&k.delete()},function(){})},loadReverseValuesCount:function(a,c){var e=Jassa.rdf,f="SELECT COUNT(?s) AS ?c WHERE {?s <"+c.uri+"> <"+a.uri+">}";return d.select(f,b.endpoint(),b.endpointgraph()).then(function(a){for(var b=e.NodeFactory.createVar("c"),c=[];a.hasNext()&&0==c.length;){var d=a.nextBinding();c.push(d.get(b))}return c})},relationInstances:function(a,c){c||(c=100);var e=Jassa.rdf,f="SELECT DISTINCT ?s ?o where {?s <"+a+"> ?o} LIMIT "+c,g=["SELECT DISTINCT ?s as ?x ?pl ?l WHERE { ?s ?pl ?l . {"+f+"}","SELECT DISTINCT ?o as ?x ?pl ?l WHERE { ?o ?pl ?l . {"+f+"}"],h=this.assignLabels,i=LDViewer.addStatus("Fetching relation instances",'<span class="glyphicon glyphicon-download-alt"></span>');return d.select(f,b.endpoint(),b.endpointgraph()).then(function(a){i&&i.delete();for(var b=[],c=e.NodeFactory.createVar("s"),d=e.NodeFactory.createVar("o"),f=[];a.hasNext();){var j=a.nextBinding();console.log(j);var k=j.get(c),l=j.get(d);f.push(k),f.push(l);var m={subj:k,obj:l};b.push(m),console.log(m)}return h(g,f),console.log("relation instances loaded"),b},function(){i&&i.delete()},function(){})},classInstances:function(a,c){c||(c=100);var e=Jassa.rdf,f="SELECT DISTINCT ?s where {?s <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <"+a+">} LIMIT "+c,g=["SELECT DISTINCT ?s as ?x ?pl ?l WHERE { ?s ?pl ?l . {"+f+"}"],h=this.assignLabels,i=LDViewer.addStatus("Fetching class instances",'<span class="glyphicon glyphicon-download-alt"></span>');return d.select(f,b.endpoint(),b.endpointgraph()).then(function(a){i&&i.delete();for(var b=e.NodeFactory.createVar("s"),c=[],d=[];a.hasNext();){var f=a.nextBinding(),j=f.get(b);d.push(j),c.push(j)}return h(g,d),console.log("class instances loaded"),c},function(){i&&i.delete()},function(){})},numberClassInstances:function(a){var c=Jassa.rdf,e="SELECT COUNT(?x) AS ?c WHERE {?x <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <"+a+"> }";return d.select(e,b.endpoint(),b.endpointgraph()).then(function(a){for(var b=c.NodeFactory.createVar("c");a.hasNext();)var d=a.nextBinding().get(b).literalLabel.val;return d})}}}]),angular.module("ldv.services.jassa",[]).factory("JassaService",["$q","$rootScope",function(a,b){return{select:function(c,d,e,f){var g=a.defer();f||(f=6e4);var h=Jassa.service,i=new h.SparqlServiceHttp(d,e),j=i.createQueryExecution(c);return j.setTimeout(f),j.execSelect().done(function(a){b.$apply(function(){g.resolve(a)})}).fail(function(a){b.$apply(function(){g.reject(a)})}),g.promise}}}]),angular.module("ldv.services.languages",[]).factory("LanguageService",["$rootScope",function(){return{languages:{ab:{name:"Abkhaz",nativeName:"аҧсуа"},aa:{name:"Afar",nativeName:"Afaraf"},af:{name:"Afrikaans",nativeName:"Afrikaans"},ak:{name:"Akan",nativeName:"Akan"},sq:{name:"Albanian",nativeName:"Shqip"},am:{name:"Amharic",nativeName:"አማርኛ"},ar:{name:"Arabic",nativeName:"العربية"},an:{name:"Aragonese",nativeName:"Aragonés"},hy:{name:"Armenian",nativeName:"Հայերեն"},as:{name:"Assamese",nativeName:"অসমীয়া"},av:{name:"Avaric",nativeName:"авар мацӀ, магӀарул мацӀ"},ae:{name:"Avestan",nativeName:"avesta"},ay:{name:"Aymara",nativeName:"aymar aru"},az:{name:"Azerbaijani",nativeName:"azərbaycan dili"},bm:{name:"Bambara",nativeName:"bamanankan"},ba:{name:"Bashkir",nativeName:"башҡорт теле"},eu:{name:"Basque",nativeName:"euskara, euskera"},be:{name:"Belarusian",nativeName:"Беларуская"},bn:{name:"Bengali",nativeName:"বাংলা"},bh:{name:"Bihari",nativeName:"भोजपुरी"},bi:{name:"Bislama",nativeName:"Bislama"},bs:{name:"Bosnian",nativeName:"bosanski jezik"},br:{name:"Breton",nativeName:"brezhoneg"},bg:{name:"Bulgarian",nativeName:"български език"},my:{name:"Burmese",nativeName:"ဗမာစာ"},ca:{name:"Catalan; Valencian",nativeName:"Català"},ch:{name:"Chamorro",nativeName:"Chamoru"},ce:{name:"Chechen",nativeName:"нохчийн мотт"},ny:{name:"Chichewa; Chewa; Nyanja",nativeName:"chiCheŵa, chinyanja"},zh:{name:"Chinese",nativeName:"中文 (Zhōngwén), 汉语, 漢語"},cv:{name:"Chuvash",nativeName:"чӑваш чӗлхи"},kw:{name:"Cornish",nativeName:"Kernewek"},co:{name:"Corsican",nativeName:"corsu, lingua corsa"},cr:{name:"Cree",nativeName:"ᓀᐦᐃᔭᐍᐏᐣ"},hr:{name:"Croatian",nativeName:"hrvatski"},cs:{name:"Czech",nativeName:"česky, čeština"},da:{name:"Danish",nativeName:"dansk"},dv:{name:"Divehi; Dhivehi; Maldivian;",nativeName:"ދިވެހި"},nl:{name:"Dutch",nativeName:"Nederlands, Vlaams"},en:{name:"English",nativeName:"English"},eo:{name:"Esperanto",nativeName:"Esperanto"},et:{name:"Estonian",nativeName:"eesti, eesti keel"},ee:{name:"Ewe",nativeName:"Eʋegbe"},fo:{name:"Faroese",nativeName:"føroyskt"},fj:{name:"Fijian",nativeName:"vosa Vakaviti"},fi:{name:"Finnish",nativeName:"suomi, suomen kieli"},fr:{name:"French",nativeName:"français, langue française"},ff:{name:"Fula; Fulah; Pulaar; Pular",nativeName:"Fulfulde, Pulaar, Pular"},gl:{name:"Galician",nativeName:"Galego"},ka:{name:"Georgian",nativeName:"ქართული"},de:{name:"German",nativeName:"Deutsch"},el:{name:"Greek, Modern",nativeName:"Ελληνικά"},gn:{name:"Guaraní",nativeName:"Avañeẽ"},gu:{name:"Gujarati",nativeName:"ગુજરાતી"},ht:{name:"Haitian; Haitian Creole",nativeName:"Kreyòl ayisyen"},ha:{name:"Hausa",nativeName:"Hausa, هَوُسَ"},he:{name:"Hebrew (modern)",nativeName:"עברית"},hz:{name:"Herero",nativeName:"Otjiherero"},hi:{name:"Hindi",nativeName:"हिन्दी, हिंदी"},ho:{name:"Hiri Motu",nativeName:"Hiri Motu"},hu:{name:"Hungarian",nativeName:"Magyar"},ia:{name:"Interlingua",nativeName:"Interlingua"},id:{name:"Indonesian",nativeName:"Bahasa Indonesia"},ie:{name:"Interlingue",nativeName:"Originally called Occidental; then Interlingue after WWII"},ga:{name:"Irish",nativeName:"Gaeilge"},ig:{name:"Igbo",nativeName:"Asụsụ Igbo"},ik:{name:"Inupiaq",nativeName:"Iñupiaq, Iñupiatun"},io:{name:"Ido",nativeName:"Ido"},is:{name:"Icelandic",nativeName:"Íslenska"},it:{name:"Italian",nativeName:"Italiano"},iu:{name:"Inuktitut",nativeName:"ᐃᓄᒃᑎᑐᑦ"},ja:{name:"Japanese",nativeName:"日本語 (にほんご／にっぽんご)"},jv:{name:"Javanese",nativeName:"basa Jawa"},kl:{name:"Kalaallisut, Greenlandic",nativeName:"kalaallisut, kalaallit oqaasii"},kn:{name:"Kannada",nativeName:"ಕನ್ನಡ"},kr:{name:"Kanuri",nativeName:"Kanuri"},ks:{name:"Kashmiri",nativeName:"कश्मीरी, كشميري‎"},kk:{name:"Kazakh",nativeName:"Қазақ тілі"},km:{name:"Khmer",nativeName:"ភាសាខ្មែរ"},ki:{name:"Kikuyu, Gikuyu",nativeName:"Gĩkũyũ"},rw:{name:"Kinyarwanda",nativeName:"Ikinyarwanda"},ky:{name:"Kirghiz, Kyrgyz",nativeName:"кыргыз тили"},kv:{name:"Komi",nativeName:"коми кыв"},kg:{name:"Kongo",nativeName:"KiKongo"},ko:{name:"Korean",nativeName:"한국어 (韓國語), 조선말 (朝鮮語)"},ku:{name:"Kurdish",nativeName:"Kurdî, كوردی‎"},kj:{name:"Kwanyama, Kuanyama",nativeName:"Kuanyama"},la:{name:"Latin",nativeName:"latine, lingua latina"},lb:{name:"Luxembourgish, Letzeburgesch",nativeName:"Lëtzebuergesch"},lg:{name:"Luganda",nativeName:"Luganda"},li:{name:"Limburgish, Limburgan, Limburger",nativeName:"Limburgs"},ln:{name:"Lingala",nativeName:"Lingála"},lo:{name:"Lao",nativeName:"ພາສາລາວ"},lt:{name:"Lithuanian",nativeName:"lietuvių kalba"},lu:{name:"Luba-Katanga",nativeName:""},lv:{name:"Latvian",nativeName:"latviešu valoda"},gv:{name:"Manx",nativeName:"Gaelg, Gailck"},mk:{name:"Macedonian",nativeName:"македонски јазик"},mg:{name:"Malagasy",nativeName:"Malagasy fiteny"},ms:{name:"Malay",nativeName:"bahasa Melayu, بهاس ملايو‎"},ml:{name:"Malayalam",nativeName:"മലയാളം"},mt:{name:"Maltese",nativeName:"Malti"},mi:{name:"Māori",nativeName:"te reo Māori"},mr:{name:"Marathi (Marāṭhī)",nativeName:"मराठी"},mh:{name:"Marshallese",nativeName:"Kajin M̧ajeļ"},mn:{name:"Mongolian",nativeName:"монгол"},na:{name:"Nauru",nativeName:"Ekakairũ Naoero"},nv:{name:"Navajo, Navaho",nativeName:"Diné bizaad, Dinékʼehǰí"},nb:{name:"Norwegian Bokmål",nativeName:"Norsk bokmål"},nd:{name:"North Ndebele",nativeName:"isiNdebele"},ne:{name:"Nepali",nativeName:"नेपाली"},ng:{name:"Ndonga",nativeName:"Owambo"},nn:{name:"Norwegian Nynorsk",nativeName:"Norsk nynorsk"},no:{name:"Norwegian",nativeName:"Norsk"},ii:{name:"Nuosu",nativeName:"ꆈꌠ꒿ Nuosuhxop"},nr:{name:"South Ndebele",nativeName:"isiNdebele"},oc:{name:"Occitan",nativeName:"Occitan"},oj:{name:"Ojibwe, Ojibwa",nativeName:"ᐊᓂᔑᓈᐯᒧᐎᓐ"},cu:{name:"Old Church Slavonic, Church Slavic, Church Slavonic, Old Bulgarian, Old Slavonic",nativeName:"ѩзыкъ словѣньскъ"},om:{name:"Oromo",nativeName:"Afaan Oromoo"},or:{name:"Oriya",nativeName:"ଓଡ଼ିଆ"},os:{name:"Ossetian, Ossetic",nativeName:"ирон æвзаг"},pa:{name:"Panjabi, Punjabi",nativeName:"ਪੰਜਾਬੀ, پنجابی‎"},pi:{name:"Pāli",nativeName:"पाऴि"},fa:{name:"Persian",nativeName:"فارسی"},pl:{name:"Polish",nativeName:"polski"},ps:{name:"Pashto, Pushto",nativeName:"پښتو"},pt:{name:"Portuguese",nativeName:"Português"},qu:{name:"Quechua",nativeName:"Runa Simi, Kichwa"},rm:{name:"Romansh",nativeName:"rumantsch grischun"},rn:{name:"Kirundi",nativeName:"kiRundi"},ro:{name:"Romanian, Moldavian, Moldovan",nativeName:"română"},ru:{name:"Russian",nativeName:"русский язык"},sa:{name:"Sanskrit (Saṁskṛta)",nativeName:"संस्कृतम्"},sc:{name:"Sardinian",nativeName:"sardu"},sd:{name:"Sindhi",nativeName:"सिन्धी, سنڌي، سندھی‎"},se:{name:"Northern Sami",nativeName:"Davvisámegiella"},sm:{name:"Samoan",nativeName:"gagana faa Samoa"},sg:{name:"Sango",nativeName:"yângâ tî sängö"},sr:{name:"Serbian",nativeName:"српски језик"},gd:{name:"Scottish Gaelic; Gaelic",nativeName:"Gàidhlig"},sn:{name:"Shona",nativeName:"chiShona"},si:{name:"Sinhala, Sinhalese",nativeName:"සිංහල"},sk:{name:"Slovak",nativeName:"slovenčina"},sl:{name:"Slovene",nativeName:"slovenščina"},so:{name:"Somali",nativeName:"Soomaaliga, af Soomaali"},st:{name:"Southern Sotho",nativeName:"Sesotho"},es:{name:"Spanish; Castilian",nativeName:"español, castellano"},su:{name:"Sundanese",nativeName:"Basa Sunda"},sw:{name:"Swahili",nativeName:"Kiswahili"},ss:{name:"Swati",nativeName:"SiSwati"},sv:{name:"Swedish",nativeName:"svenska"},ta:{name:"Tamil",nativeName:"தமிழ்"},te:{name:"Telugu",nativeName:"తెలుగు"},tg:{name:"Tajik",nativeName:"тоҷикӣ, toğikī, تاجیکی‎"},th:{name:"Thai",nativeName:"ไทย"},ti:{name:"Tigrinya",nativeName:"ትግርኛ"},bo:{name:"Tibetan Standard, Tibetan, Central",nativeName:"བོད་ཡིག"},tk:{name:"Turkmen",nativeName:"Türkmen, Түркмен"},tl:{name:"Tagalog",nativeName:"Wikang Tagalog, ᜏᜒᜃᜅ᜔ ᜆᜄᜎᜓᜄ᜔"},tn:{name:"Tswana",nativeName:"Setswana"},to:{name:"Tonga (Tonga Islands)",nativeName:"faka Tonga"},tr:{name:"Turkish",nativeName:"Türkçe"},ts:{name:"Tsonga",nativeName:"Xitsonga"},tt:{name:"Tatar",nativeName:"татарча, tatarça, تاتارچا‎"},tw:{name:"Twi",nativeName:"Twi"},ty:{name:"Tahitian",nativeName:"Reo Tahiti"},ug:{name:"Uighur, Uyghur",nativeName:"Uyƣurqə, ئۇيغۇرچە‎"},uk:{name:"Ukrainian",nativeName:"українська"},ur:{name:"Urdu",nativeName:"اردو"},uz:{name:"Uzbek",nativeName:"zbek, Ўзбек, أۇزبېك‎"},ve:{name:"Venda",nativeName:"Tshivenḓa"},vi:{name:"Vietnamese",nativeName:"Tiếng Việt"},vo:{name:"Volapük",nativeName:"Volapük"},wa:{name:"Walloon",nativeName:"Walon"},cy:{name:"Welsh",nativeName:"Cymraeg"},wo:{name:"Wolof",nativeName:"Wollof"},fy:{name:"Western Frisian",nativeName:"Frysk"},xh:{name:"Xhosa",nativeName:"isiXhosa"},yi:{name:"Yiddish",nativeName:"ייִדיש"},yo:{name:"Yoruba",nativeName:"Yorùbá"},za:{name:"Zhuang, Chuang",nativeName:"Saɯ cueŋƅ, Saw cuengh"}}}}]),angular.module("ldv.services.preview",[]).factory("Preview",["$http",function(){return{getProperty:function(a,b,c,d,e){void 0===c.previewSemaphore&&(c.previewSemaphore=0);var f,g=[];f=a.slice(0,d.length)==d?a:d+a;var h="SELECT DISTINCT ?p WHERE {<"+f+"> <"+b+"> ?p}",i=Jassa.rdf,j=Jassa.service,k=new j.SparqlServiceHttp(e,["http://dbpedia.org"]),l=k.createQueryExecution(h);l.setTimeout(6e4);var m=i.NodeFactory.createVar("p");return l.execSelect().done(function(a){for(c.previewSemaphore--;a.hasNext();){var b=a.nextBinding(),d=b.get(m);g.push(d)}c.$digest()}).fail(function(){c.previewSemaphore--,console.log("Preview Query FAILED")}),g}}}]),angular.module("ldv.services.search",["ldv.services.UrlService"]).factory("Search",["UrlService","$rootScope","$q",function(a,b,c){return{search:function(d,e){function f(a,b){var c,d=a.length,e=b.length;if(e>d){var f=a;a=b,b=f;var h=d;d=e,e=h}var i=new Array;i[0]=new Array;for(var f=0;e+1>f;f++)i[0][f]=f;for(var j=1;d+1>j;j++){i[j]=new Array,i[j][0]=j;for(var k=1;e+1>k;k++)c=a.charAt(j-1)==b.charAt(k-1)?0:1,i[j][k]=g(i[j-1][k]+1,i[j][k-1]+1,i[j-1][k-1]+c)}return i[d][e]}function g(a,b,c){return b>a&&c>a?a:a>b&&c>b?b:c}var h=c.defer();e||(e=10),e=25;var i=Jassa.rdf,j=Jassa.service,k=new j.SparqlServiceHttp(a.endpoint(),a.endpointgraph()),l="http://www.w3.org/2000/01/rdf-schema#label";d=d.replace(/\s/g,"_");var m="select ?s ?l {?s <"+l+'> ?l . ?l bif:contains "'+d+'" . filter(contains(str(?s), "http://dbpedia.org/"))} LIMIT '+e,n=k.createQueryExecution(m);n.setTimeout(18e4);var o=i.NodeFactory.createVar("s"),p=i.NodeFactory.createVar("l");return results=[],n.execSelect().done(function(c){b.$apply(function(){for(;c.hasNext();){var b=c.nextBinding(),e=b.get(o),g=b.get(p),i=e.uri.slice(0,a.localgraph().length);if(i==a.localgraph()&&g.literalLabel){var j=f(g.literalLabel.lex,d),k={uri:e,dist:j,label:g};results.push(k)}}results.sort(function(a,b){return a.dist-b.dist}),h.resolve(results)})}).fail(function(){b.$apply(function(){console.log("search query failed"),h.reject("searching with SPARQL failed")})}),h.promise}}}]),angular.module("ldv.services",["ldv.services.jassa","ldv.services.UrlService","ldv.services.preview","ldv.services.entity","ldv.services.search","ldv.services.spotlight","ldv.services.taf","ldv.services.languages"]),angular.module("ldv.services.spotlight",[]).factory("Spotlight",["$http","$rootScope",function(a,b){return{annotate:function(c){delete a.defaults.headers.common["X-Requested-With"];var d=b.spotlightendpoint;a.get(d,"text="+c).success(function(){}).error(function(){})},annotate_async:function(c,d,e){delete a.defaults.headers.common["X-Requested-With"];var f=b.spotlightendpoint;a.get(f+"?text="+encodeURIComponent(c)).success(function(a){d(a,e)}).error(function(){alert("Annotation error"),d(void 0,e)})}}}]),angular.module("ldv.services.taf",[]).factory("TafService",["$rootScope",function(){return{onPredicateChange:function(a,b){if(void 0!==b){this.bindTaf(a,b);for(var c in b)for(var d=0;d<b[c].values.length;d++)if(b[c].forward){var e=b[c].values[d];void 0!==e.literalLabel&&void 0!==e.literalLabel.lang&&""!==e.literalLabel.lang&&LDViewer.newAvailableLanguage(e.literalLabel.lang)}}},bindTaf:function(a,b){var c=this.getActions();for(var d in b){var e=b[d];this.bindTafPredicate(a,e,c)}},bindTafPredicate:function(a,b,c){c||(c=this.getActions());for(var d=0;d<b.values.length;d++){var e=b.values[d];if(void 0===e.taf){e.taf=[];for(var f=0;f<c.length;f++){var g=c[f];try{var h=new g(a,b,e);e.taf.push(h)}catch(i){}}}}},getActions:function(){console.log("getting actions");for(var a=[LDViewer.Action],b=0;b<a.length;){var c=a[b];c.abstrait&&(a.splice(b,1),b--);for(var d in c.subclasses){var e=c.subclasses[d];a.push(e)}b++}return a}}}]),LDViewer.Action=Class.create({initialize:function(a,b,c){if(void 0===a||void 0===b||void 0===c)throw"action not applicable";this.about=a,this.predicate=b,this.value=c}}),LDViewer.Action.init=function(){},LDViewer.Action.abstrait=!0;var RedirectAction=Class.create(LDViewer.Action,{initialize:function(a,b,c){throw b.forward&&"http://dbpedia.org/ontology/wikiPageRedirects"==b.uri&&(window.location=LDViewer.preprocess_triple_url(c.uri)),"done"}}),PrettyListAction=Class.create(LDViewer.Action,{initialize:function(a,b,c){if(b.forward){var d=this.properties[b.uri];if(d){var e=LDViewer.getPrettyPropertyAdder(d.label,d.prio);e&&e(c)}}},properties:{"http://dbpedia.org/ontology/birthPlace":{reverse:!1,label:"Place of Birth",prio:1},"http://dbpedia.org/property/occupation":{reverse:!1,label:"Occupation",prio:3},"http://dbpedia.org/ontology/birthDate":{reverse:!1,label:"Date of Birth",prio:2},"http://dbpedia.org/ontology/areaCode":{reverse:!1,label:"Area Code",prio:4},"http://dbpedia.org/ontology/country":{reverse:!1,label:"Country",prio:5},"http://dbpedia.org/ontology/capital":{reverse:!1,label:"Capital",prio:6},"http://dbpedia.org/ontology/currency":{reverse:!1,label:"Currency",prio:7},"http://dbpedia.org/ontology/language":{reverse:!1,label:"Language",prio:8},"http://dbpedia.org/ontology/leaderName":{reverse:!1,label:"Leaders",prio:9},"http://dbpedia.org/ontology/wikiPageDisambiguates":{reverse:!1,label:"Disambiguations",prio:10}}}),PrettyBoxAction=Class.create(LDViewer.Action,{initialize:function(a,b,c,d,e){throw b.uri==d&&LDViewer.applyPrettyBox(function(a){void 0===a[e]&&(a[e]=[]),a[e].push(c),console.log("extracted "+e)}),"done"}});PrettyBoxAction.abstrait=!0;var LabelAction=Class.create(PrettyBoxAction,{initialize:function(a,b,c){var d=this.mapto,e=this.mapfrom;throw b.uri==e&&LDViewer.applyPrettyBox(function(a){void 0===a[d]&&(a[d]=[]),a[d].push(c),console.log("extracted "+d)}),"done"},mapfrom:"http://www.w3.org/2000/01/rdf-schema#label",mapto:"label"}),TypeAction=Class.create(PrettyBoxAction,{initialize:function(a,b,c){if(b.uri==this.mapfrom&&c.uri.slice(0,this.prefiks.length)==this.prefiks){{var d=this.mapto;
this.mapfrom}c.displayValue=c.uri.slice(this.prefiks.length,c.uri.length),LDViewer.applyPrettyBox(function(a){void 0===a[d]&&(a[d]=[]),a[d].push(c)})}throw"done"},prefiks:"http://dbpedia.org/ontology/",mapfrom:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type",mapto:"types"}),AbstractAction=Class.create(PrettyBoxAction,{initialize:function(a,b,c){var d=this.mapto,e=this.mapfrom;throw b.uri==e&&LDViewer.applyPrettyBox(function(a){void 0===a[d]&&(a[d]=[]),a[d].push(c),console.log("extracted "+d)}),"done"},mapfrom:"http://www.w3.org/2000/01/rdf-schema#comment",mapto:"description"}),ThumbnailAction=Class.create(PrettyBoxAction,{initialize:function(a,b,c){var d=this.mapto,e=this.mapfrom;throw b.uri==e&&LDViewer.applyPrettyBox(function(a){void 0===a[d]&&(a[d]=[]),a[d].push(c),console.log("extracted "+d)}),"done"},mapfrom:"http://dbpedia.org/ontology/thumbnail",mapto:"thumbnail"}),LinkAction=Class.create(PrettyBoxAction,{initialize:function(a,b,c){if(b.forward)for(var d=0;d<this.mappings.length;d++){var e=this.mappings[d];if(e.predex.test(b.uri)&&e.valuex.test(c.uri)){var f=this.mapto,g=e.label,h=e.labelx.exec(c.uri);h=h.slice(1),c.plex=h.join(""),LDViewer.applyPrettyBox(function(a){void 0===a[f]&&(a[f]={}),void 0===a[f][g]&&(a[f][g]=[]),a[f][g].push(c)})}}throw"done"},mapto:"links",mappings:[{predex:new RegExp("^http://xmlns.com/foaf/0.1/isPrimaryTopicOf$"),valuex:new RegExp(".*wikipedia.*"),label:"wikipedia",labelx:new RegExp("http://([a-z]+.wikipedia.org/.+)")},{predex:new RegExp("^http://www.w3.org/2002/07/owl#sameAs$"),valuex:new RegExp(".*dbpedia.org.*"),label:"dbpedia",labelx:new RegExp("http://([a-z]+.dbpedia).org/resource(/.+)")},{predex:new RegExp("^http://www.w3.org/2002/07/owl#sameAs$"),valuex:new RegExp(".*freebase.com.*"),label:"freebase",labelx:new RegExp("^http://(.+)$")}]}),MapAction=Class.create(PrettyBoxAction,{initialize:function(a,b,c){if(b.forward&&b.uri==this.mapfrom){var d=c.literalLabel.val.match(/([-+]?([0-9]*\.[0-9]+|[0-9]+))\s([-+]?([0-9]*\.[0-9]+|[0-9]+))/),e=[d[3],d[1]];LDViewer.setMapCoord(e)}throw"done"},mapfrom:"http://www.georss.org/georss/point"}),LgdMapAction=Class.create(LDViewer.Action,{initialize:function(a,b,c){if(b.forward&&b.uri==this.mapfrom){var d=c.literalLabel.lex.match(this.regex),e=[d[1],d[3]];LDViewer.setMapCoord(e)}throw"done"},mapfrom:"http://www.opengis.net/ont/geosparql#asWKT",regex:/POINT\(([-+]?([0-9]*\.[0-9]+|[0-9]+))\s([-+]?([0-9]*\.[0-9]+|[0-9]+))\)/}),LgdDuoMapAction=Class.create(LDViewer.Action,{initialize:function(a,b,c){throw b.forward&&b.uri==this.latprop?LgdDuoMapAction.currentLat=c.literalLabel.lex:b.forward&&b.uri==this.lonprop&&(LgdDuoMapAction.currentLon=c.literalLabel.lex),void 0!==LgdDuoMapAction.currentLon&&void 0!==LgdDuoMapAction.currentLat&&(LDViewer.setMapCoord([LgdDuoMapAction.currentLon,LgdDuoMapAction.currentLat]),LgdDuoMapAction.currentLon=void 0,LgdDuoMapAction.currentLat=void 0),"done"},latprop:"http://www.w3.org/2003/01/geo/wgs84_pos#lat",lonprop:"http://www.w3.org/2003/01/geo/wgs84_pos#long"}),ShortcutAction=Class.create(PrettyBoxAction,{initialize:function(a,b){for(var c in this.mappings)if(b.uri==c&&b.forward!=this.mappings[c].reverse){var d=this.mappings[b.uri].label,e=this.mappings[b.uri].prio;LDViewer.addShortcut(b.uri,d,e)}throw"done"},mappings:{"http://www.w3.org/1999/02/22-rdf-syntax-ns#type":{reverse:!1,label:"TYPES",prio:10},"http://purl.org/dc/terms/subject":{reverse:!1,label:"CATEGORIES",prio:11},"http://dbpedia.org/ontology/birthPlace":{reverse:!0,label:"Born Here",prio:1},"http://dbpedia.org/ontology/wikiPageExternalLink":{reverse:!1,label:"External Links",prio:9},"http://dbpedia.org/ontology/starring":{reverse:!0,label:"Starred in",prio:1},"http://www.w3.org/2002/07/owl#sameAs":{reverse:!1,label:"Same As",prio:8},"http://dbpedia.org/ontology/wikiPageDisambiguates":{reverse:!1,label:"Disambiguations",prio:9}}}),WikipediaAction=Class.create(LDViewer.Action,{initialize:function(a,b,c){if(void 0===c.uri||0!=c.uri.indexOf("http://dbpedia.org/resource"))throw"not applicable"},description:"View original Wikipedia page",display:function(){return"<span class='dbpvicon dbpvicon-wikipedia'></span>"},regex:/http\:\/\/(\w{2,3}\.)?dbpedia\.org\/resource\/(.+)/g,execute:function(a,b,c){var d=this.regex.exec(c.uri);void 0===d[1]&&(d[1]="");var e="http://"+d[1]+"wikipedia.org/wiki/"+d[2];window.open(e)}});WikipediaAction.legendize=function(){return{name:"Wikipedia",description:"Show original Wikipedia page",lines:[{icon:"<span class='dbpvicon dbpvicon-wikipedia'></span>",text:"Opens the corresponding Wikipedia page"}]}};var TemplateAction=Class.create(LDViewer.Action,{initialize:function(a,b,c){var d=new RegExp(this.regex());if(void 0===c.uri||!d.test(c.uri))throw new"not applicable"},description:"View DBpedia mapping",display:function(){return"<span class='glyphicon glyphicon-forward'></span>"},execute:function(a,b,c){var d=new RegExp(this.regex()),e=d.exec(c.uri);void 0===e[2]&&(e[2]="en.");var f="http://mappings.dbpedia.org/index.php/Mapping_"+e[2].substring(0,e[2].length-1)+":"+e[3];window.open(f)}}),RelFinderAction=Class.create(LDViewer.Action,{initialize:function(a,b,c){var d=new RegExp("^http://([a-z]+.)?dbpedia.org/resource/.+$");if(void 0===c.uri||d.exec(c.uri)[1]!=d.exec(a.uri)[1])throw new"not applicable"},description:"View more relations on RelFinder",display:function(){return"<span class='dbpvicon dbpvicon-relfinder'></span>"},execute:function(a,b,c){var d=new RegExp("^http://([a-z]+.)?dbpedia.org/resource/(.+)$"),e=encodeURIComponent(d.exec(a.uri)[2]),f=d.exec(a.uri)[1];void 0===f&&(f="");var g=encodeURIComponent(d.exec(c.uri)[2]),h=a.uri,i=c.uri;if(b.reverse){var j=e;e=g,g=j,j=h,h=i,i=j}var k=[];k.push("http://www.visualdataweb.org/relfinder/demo.swf"),k.push("?"),k.push("obj1="+this.to64(g+"|"+i)),k.push("&obj2="+this.to64(e+"|"+h)),k.push("&name="+this.to64("DBpedia")),k.push("&abbreviation="+this.to64("dbp")),k.push("&description="+this.to64("Linked Data version of Wikipedia")),k.push("&endpointURI="+this.to64("http://"+f+"dbpedia.org/sparql")),k.push("&dontAppendSPARQL="+this.to64("true")),k.push("&defaultGraphURI="+this.to64("http://"+f+"dbpedia.org")),k.push("&isVirtuoso="+this.to64("true")),k.push("&useProxy=ZmFsc2U=&method=UE9TVA==&autocompleteLanguage=ZW4=&autocompleteURIs=aHR0cDovL3d3dy53My5vcmcvMjAwMC8wMS9yZGYtc2NoZW1hI2xhYmVs&ignoredProperties=aHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zI3R5cGUsaHR0cDovL3d3dy53My5vcmcvMjAwNC8wMi9za29zL2NvcmUjc3ViamVjdCxodHRwOi8vZGJwZWRpYS5vcmcvcHJvcGVydHkvd2lraVBhZ2VVc2VzVGVtcGxhdGUsaHR0cDovL2RicGVkaWEub3JnL3Byb3BlcnR5L3dvcmRuZXRfdHlwZSxodHRwOi8vZGJwZWRpYS5vcmcvcHJvcGVydHkvd2lraWxpbmssaHR0cDovL3d3dy53My5vcmcvMjAwMi8wNy9vd2wjc2FtZUFzLGh0dHA6Ly9wdXJsLm9yZy9kYy90ZXJtcy9zdWJqZWN0&abstractURIs=aHR0cDovL2RicGVkaWEub3JnL29udG9sb2d5L2Fic3RyYWN0&imageURIs=aHR0cDovL2RicGVkaWEub3JnL29udG9sb2d5L3RodW1ibmFpbCxodHRwOi8veG1sbnMuY29tL2ZvYWYvMC4xL2RlcGljdGlvbg==&linkURIs=aHR0cDovL3B1cmwub3JnL29udG9sb2d5L21vL3dpa2lwZWRpYSxodHRwOi8veG1sbnMuY29tL2ZvYWYvMC4xL2hvbWVwYWdlLGh0dHA6Ly94bWxucy5jb20vZm9hZi8wLjEvcGFnZQ==&maxRelationLegth=Mg=="),window.open(k.join(""))},to64:function(a){var b,c,d,e,f,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="",i="",j="",k=0;do b=a.charCodeAt(k++),c=a.charCodeAt(k++),i=a.charCodeAt(k++),d=b>>2,e=(3&b)<<4|c>>4,f=(15&c)<<2|i>>6,j=63&i,isNaN(c)?f=j=64:isNaN(i)&&(j=64),h=h+g.charAt(d)+g.charAt(e)+g.charAt(f)+g.charAt(j),b=c=i="",d=e=f=j="";while(k<a.length);return h}}),SpotlightAction=Class.create(LDViewer.Action,{initialize:function(a,b,c){if(void 0===c.literalLabel||void 0===c.literalLabel.lex||c.literalLabel.lex.length<50)throw new"not applicable"},busy:!1,done:!1,display:function(){return this.busy?"<span class='glyphicon glyphicon-time'></span>":"<span class='glyphicon glyphicon-bullhorn'></span>"},value:void 0,endpoint:"http://spotlight.dbpedia.org/rest/annotate",execute:function(a,b,c){if(this.busy||this.done)LDViewer.addNotification("Annotation request to the DBpedia Spotlight API is already pending",5e3);else{var d=this,e=c.literalLabel.lex;LDViewer.http.get(this.endpoint+"?text="+encodeURIComponent(e)).success(function(a){if(d.busy=!1,d.done=!0,void 0!==a&&void 0!==a.Resources){for(var b=a.Resources,f=0,g=[],h=0;h<b.length;h++){var i=b[h],j=parseInt(i["@offset"]),k=i["@surfaceForm"].length,l=i["@URI"];l=LDViewer.preprocess_triple_url(l),l='<a dbpv-preview href="'+l+'">',g.push(e.substring(f,j)),g.push(l+e.substr(j,k)+"</a>"),f=j+k}g.push(e.substr(f)),c.literalLabel.lex=g.join("")}}).error(function(){LDViewer.addNotification("Annotation request failed",5e3)}),this.busy=!0}}}),LodliveAction=Class.create(LDViewer.Action,{initialize:function(a,b,c){if(void 0===c.uri||0!=c.uri.indexOf("http://dbpedia.org/resource"))throw new"not applicable"},display:function(){return"<span class='dbpvicon dbpvicon-lodlive'></span>"},description:"View in LodLive",execute:function(a,b,c){var d="http://en.lodlive.it/?";window.open(d+c.uri)}}),DisclaimerAction=Class.create(LDViewer.Action,{initialize:function(a,b,c){if(b.uri.match("http://xmlns.com/foaf/0.1/isPrimaryTopicOf")){var d={};d.url=c.uri;var e=new RegExp("http:\\/\\/(\\w{2,4})\\.wikipedia\\.org\\/wiki\\/(.*)"),f=e.exec(c.uri),g=f[1];d.title=f[2],d.history="http://"+g+".wikipedia.org/w/index.php?title="+d.title+"&action=history",LDViewer.setFooterWikipage(d)}throw"executed"}}),NofollowAction=Class.create(LDViewer.Action,{initialize:function(a,b,c){throw(b.uri.match("wikiPageExternalLink")||b.uri.match("xmlns.com/foaf/0.1/homepage"))&&(c.nofollow=!0),"executed"}}),RelationInstancesAction=Class.create(LDViewer.Action,{initialize:function(a,b,c){throw b.uri.match("http://www.w3.org/1999/02/22-rdf-syntax-ns#type")&&(c.uri.match("#DatatypeProperty")||c.uri.match("#ObjectProperty")||c.uri.match("http://www.w3.org/1999/02/22-rdf-syntax-ns#Property"))&&LDViewer.showRelationInstances(),"executed"}}),ClassInstancesAction=Class.create(LDViewer.Action,{initialize:function(a,b,c){throw b.uri.match("http://www.w3.org/1999/02/22-rdf-syntax-ns#type")&&c.uri.match("#Class")&&LDViewer.showClassInstances(),"executed"}}),ldvCompile=angular.module("ldv.compile",[]);ldvCompile.directive("compile",["$compile",function(a){return function(b,c,d){b.$watch(function(a){return a.$eval(d.compile)},function(d){c.html(d),a(c.contents())(b)})}}]);var filterModule=angular.module("ldv.filters",[]);filterModule.filter("valueFilter",function(){return function(a,b){if(b){b=b.toLowerCase();var c=[];return angular.forEach(a,function(a){var d=a.lex;void 0===d&&void 0!==a.literalLabel&&(d=a.literalLabel.lex),void 0!==d&&-1!=d.toLowerCase().indexOf(b)&&c.push(a)}),c}return a}}),filterModule.filter("predicateFilter",function(){return function(a,b){if(!b)return a;b=b.toLowerCase();var c={};return angular.forEach(a,function(a){var d=a.lex.toLowerCase();-1!=d.indexOf(b)&&(c[a.predid]=a)}),c}}),filterModule.filter("predicateValueFilter",function(){return function(a,b){if(!b)return a;b=b.toLowerCase();var c={};return angular.forEach(a,function(a){for(var d=!1,e=0;e<a.values.length;e++){var f=a.values[e].lex;void 0===f&&void 0!==a.values[e].literalLabel&&(f=a.values[e].literalLabel.lex),void 0!==f&&-1!=f.toLowerCase().indexOf(b)&&(d=!0)}d&&(c[a.predid]=a)}),c}}),filterModule.filter("languageFilter",function(){return function(a,b,c){if(a&&(!b||!c||a.length<2),void 0===a||a.length<2)return a;var d=[],e=!1,f=!1;return angular.forEach(a,function(a){if(!e)if(void 0!==a.uri)d.push(a);else if(void 0!==a.literalLabel)if("en"==a.literalLabel.lang,void 0===a.literalLabel.lang||""==a.literalLabel.lang)d.push(a);else if(a.literalLabel.lang==b){if(!f)for(var g=0;g<d.length;g++){var h=d[g];void 0!==h.literalLabel&&void 0!==h.literalLabel.lang&&h.literalLabel.lang!=b&&(d.splice(g,1),g--)}d.push(a),f=!0}else 0!=d.length||a.literalLabel.lang!=c||f||d.push(a)}),d}}),filterModule.filter("actionFilter",function(){return function(a,b,c,d){if(!c||!d)return[];var e=[];return angular.forEach(a,function(a){void 0!==a.autobind&&a.autobind(b,c,d)&&e.push(a)}),e}});var nodeModule=angular.module("ldv.table.displayNode",["ldv.compile","ldv.filters","ldv.services.UrlService"]);nodeModule.directive("displayNode",function(){return{restrict:"EA",transclude:!1,replace:!0,template:'<span compile="nodedisplay"></span>',controller:"DisplayNodeCtrl",scope:{node:"=",primarylang:"=",fallbacklang:"=",settings:"=",showlanguage:"="}}}).controller("DisplayNodeCtrl",["$scope","UrlService","$rootScope","$filter",function(a,b,c,d){a.showlanguage||(a.showlanguage=!0),a.updatePlainLiteral=function(){var b='<span class="valuetype">@'+a.node.literalLabel.lang+"</span>",c=a.node.literalLabel.val;void 0===a.node.literalLabel.lex?a.node.literalLabel.lex=c:c=a.node.literalLabel.lex,a.showlanguage&&(c+=" "+b),a.nodedisplay=c},a.updateDisplay=function(){if(void 0!==a.node.uri){var e=a.node.uri,f=a.node.uri,g=a.node.uri,h=b.prefixify(a.node.uri);if(void 0!==h&&h.length>1&&(f=a.settings&&a.settings.noprefix||c.showLabels?h[1]:'<span class="rdf-prefix">'+h[0]+":</span>"+h[1],g=h[0]+":"+h[1]),a.node.labelNodes&&c.showLabels){var i=d("languageFilter")(a.node.labelNodes,a.primarylang,a.fallbacklang);i&&i.length>0&&(f=i[0].literalLabel.val,g=f)}var j=b.makeUrl(a.node.uri);e=j.uri;var k="";j.local&&(k+=" dbpv-preview"),a.node.nofollow&&(k+=' rel="nofollow"');var l='<a href="'+e+'"'+k+">"+f+"</a>";void 0!==a.node.forward&&0==a.node.forward&&(l="is "+l+" of"),a.node.lex=g,a.nodedisplay=l}else if(void 0!==a.node.literalLabel){var f="",m="";if(void 0===a.node.literalLabel.dtype&&void 0!==a.node.literalLabel.lang)a.updatePlainLiteral(a.node),a.$watch("node.literalLabel.lex",function(){a.updatePlainLiteral(a.node)});else if(void 0!==a.node.literalLabel.dtype){m=a.node.literalLabel.dtype.datatypeUri;var h=b.prefixify(m);void 0!==h&&h.length>1&&(m=h[0]+":"+h[1]),f=a.node.literalLabel.lex,void 0===a.node.literalLabel.lex&&(a.node.literalLabel.lex=f),void 0!==m&&(f=f+'<span class="valuetype"> ('+m+")</span>")}a.nodedisplay=f}},a.updateDisplay(),c.showLabels&&(a.$watch("node.labelNodes",function(){a.updateDisplay()}),a.$watch("primarylang+fallbacklang",function(){a.updateDisplay()})),a.updateTypedLiteral=function(){}}]);var tripleTableModule=angular.module("ldv.table",["ldv.table.displayNode","ldv.table.displayValues","ldv.ui.filters","ldv.services.taf","ldv.services.entity"]);tripleTableModule.directive("displayPredicates",function(){return{restrict:"EA",replace:!1,transclude:!1,scope:{about:"=",primarylang:"=",fallbacklang:"="},template:'<div class="top-block"> <div id="triples-top"><div class="predicate"> <div class="pred-name form-inline"> <label class="dbpv-tabletop"> Property:</label> <span predicate-filter predfilter="predfilter"></span></div><div class="pred-values">		<div class="pred-value form-inline"> 	<label class="dbpv-tabletop"> Value: 	</label> 	<span value-filter valfilter="valfilter">	</span></div>				</div>			</div>	</div>	<div class="predicate" ng-repeat="(id, predicate) in predicates | predicateFilter:predfilter | predicateValueFilter:valfilter | orderBy:sortPredicates">		<div ng-switch on="predicate.forward">			<div ng-switch-when="true">				<div display-predicate about="about" predicate="predicate" valfilter="valfilter" primarylang="primarylang" fallbacklang="fallbacklang">				</div>			</div>			<div ng-switch-default><div display-reverse-predicate about="about" predicate="predicate" valfilter="valfilter"									primarylang="primarylang" fallbacklang="fallbacklang"></div>			</div>		</div>	</div></div>',controller:"DisplayPredicatesCtrl",link:function(){console.log("linking")}}}).controller("DisplayPredicatesCtrl",["$scope","$timeout","$filter","Entity","TafService","$rootScope","$q",function(a,b,c,d,e,f,g){a.sortPredicates=function(a){return a.predid},a.load=function(){a.predicates={};var b=d.triples(a.about.uri,a.predicates);a.reversepredicates={};var c=d.reversePredicates(a.about.uri,a.reversepredicates);g.all([b,c]).then(function(b){jQuery.extend(a.predicates,b[0]),jQuery.extend(a.predicates,b[1]);var c=!0;for(var d in a.predicates){c=!1;break}c?!function(){f.loadFailed("No information available for "+a.about.uri)}(a.about.uri):a.doTaf=!0},function(){!function(){f.loadFailed("No information available for "+a.about.uri)}(a.about.uri)},function(){})},a.$watch("doTaf",function(b){b&&e.onPredicateChange(a.about,a.predicates)}),a.doTaf=!1,a.load()}]),tripleTableModule.directive("displayPredicate",function(){return{restrict:"EA",replace:!0,transclude:!1,scope:{about:"=",predicate:"=",valfilter:"=",primarylang:"=",fallbacklang:"="},template:'<div><div class="pred-name"><span display-node node="predicate" primarylang="primarylang" fallbacklang="fallbacklang"></span></div><div display-node-values about="about" predicate="predicate" values="predicate.values" valfilter="valfilter" primarylang="primarylang" fallbacklang="fallbacklang"></div></div>'}}),tripleTableModule.directive("displayReversePredicate",function(){return{restrict:"EA",replace:!0,transclude:!1,scope:{about:"=",predicate:"=",valfilter:"=",primarylang:"=",fallbacklang:"="},template:'<div><div class="pred-name"><span display-node node="predicate" primarylang="primarylang" fallbacklang="fallbacklang"></span></div><div display-reverse-node-values about="about" predicate="predicate" values="predicate.values" valfilter="valfilter" primarylang="primarylang" fallbacklang="fallbacklang"></div></div>'}});var valuesModule=angular.module("ldv.table.displayValues",["ldv.table.displayNode","ldv.ui.pagination","ldv.filters","ldv.table.taf","ldv.services.entity"]);valuesModule.directive("displayNodeValues",function(){return{restrict:"EA",replace:!0,transclude:!1,scope:{about:"=",predicate:"=",values:"=",valfilter:"=",primarylang:"=",fallbacklang:"="},template:'<div class="pred-values"><div class="pred-value" ng-repeat="val in vals | orderBy:sortValues" ng-show="val.show"><span triple-actions="val.taf" about="about" predicate="predicate" value="val"></span> <span display-node node="val" primarylang="primarylang" fallbacklang="fallbacklang"></span></div><div ng-show="showButton"><button class="btn btn-block btn-primary btn-small btn-show-more dbpv-btn" ng-click="onShowAll()">Show All</button></div></div>',controller:"DisplayNodeValuesCtrl"}}).controller("DisplayNodeValuesCtrl",["$scope","$filter",function(a,b){a.DisplayNodeValuesCtrl=!0;var c=10,d=5;"http://www.georss.org/georss/point"==a.predicate.uri&&console.log("GEORSS found"),a.moreOrLess=function(){a.showMore?a.showAll():a.showLess()},a.showLess=function(){if(a.vals.length>c){for(var b=0;b<a.vals.length;b++)a.vals[b].show=d>b?!0:!1;a.showButton=!0}else{for(var b=0;b<a.vals.length;b++)a.vals[b].show=!0;a.showButton=!1}},a.onShowAll=function(){a.showMore=!0,a.moreOrLess()},a.showAll=function(){for(var b=0;b<a.vals.length;b++)a.vals[b].show=!0;a.showButton=!1},a.$watch("valfilter+primarylang+fallbacklang",function(){a.applyFilters(),a.moreOrLess()}),a.applyFilters=function(){a.vals=b("valueFilter")(a.values,a.valfilter),a.vals=b("languageFilter")(a.vals,a.primarylang,a.fallbacklang)},a.showMore=!1,a.showButton=!1,a.applyFilters(),a.moreOrLess(),a.sortValues=function(a){return void 0!==a.prefix?a.prefix+a.short:a.label}}]),valuesModule.directive("displayReverseNodeValues",function(){return{restrict:"EA",replace:!0,transclude:!1,scope:{about:"=",predicate:"=",values:"=",valfilter:"=",primarylang:"=",fallbacklang:"="},template:'<div class="pred-values"><div class="pred-value" ng-repeat="val in vals | orderBy:sortValues" ng-show="val.show"><span triple-actions="val.taf" about="about" predicate="predicate" value="val"></span> <span display-node node="val" primarylang="primarylang" fallbacklang="fallbacklang"></span></div><div ng-show="!predicate.reverseloaded.loaded"><button class="btn btn-block btn-primary btn-small btn-show-more dbpv-btn" ng-click="onLoadButton()">LOAD</button></div><div dbpv-pagination page="predicate.reverseloaded.page" total="predicate.reverseloaded.count" perpage="limit" on-select="onPageSelect(newpage)"></div></div>',controller:"DisplayReverseNodeValuesCtrl"}}).controller("DisplayReverseNodeValuesCtrl",["$scope","$filter","Entity","TafService",function(a,b,c,d){if(a.limit=10,a.offset=0,!a.predicate.reverseloaded){var e=a.predicate.reverseloaded={};e.count=0,e.page=0,e.table={},e.loaded=!1}a.onPageSelect=function(){},a.$watch("predicate.reverseloaded.page",function(b){a.offset=b*a.limit,a.onLoad()}),a.onLoadButton=function(){a.predicate.reverseloaded.loaded=!0,a.onLoad()},a.loadCounts=function(){a.predicate.reverseloaded.loaded&&a.predicate.reverseloaded.count<1&&c.loadReverseValuesCount(a.about,a.predicate).then(function(b){a.predicate.reverseloaded.count=b[0].literalLabel.val})},a.getLoaded=function(){for(var b=[],c=a.offset;c<a.offset+a.limit;){var d=a.predicate.reverseloaded.table[c];d&&b.push(d),c++}return b},a.onLoad=function(){if(a.predicate.reverseloaded.loaded)if(a.loadCounts(),0==a.getLoaded().length){var b=a.offset,e=a.limit;c.loadReverseValues(a.about,a.predicate,e,b).then(function(c){a.showButtonLoad=!1;for(var e=0;e<c.length;e++)if(!a.predicate.reverseloaded.table[e+b]){var f=c[e];a.values.push(f),f.show=!0,a.predicate.reverseloaded.table[e+b]=f}d.bindTafPredicate(a.about,a.predicate),a.applyFilters()},function(){},function(){})}else a.applyFilters()},a.$watch("valfilter+primarylang+fallbacklang",function(){a.applyFilters()}),a.applyFilters=function(){a.vals=a.getLoaded(),a.vals=b("valueFilter")(a.vals,a.valfilter),a.vals=b("languageFilter")(a.vals,a.primarylang,a.fallbacklang)},a.applyFilters(),a.sortValues=function(a){return void 0!==a.prefix?a.prefix+a.short:a.label}}]);var tableUI=angular.module("ldv.ui.filters",[]);tableUI.directive("predicateFilter",function(){return{restrict:"EA",transclude:!1,replace:!0,template:'<input class="form-control dbpv-input dbpv-filter dbpv-filter-pred" ng-model="predfilter" data-intro="Filter predicates using a string." data-step="4"/>',scope:{predfilter:"="}}}),tableUI.directive("valueFilter",function(){return{restrict:"EA",transclude:!1,replace:!0,template:'<input class="form-control dbpv-input dbpv-filter dbpv-filter-val" ng-model="valfilter" data-intro="Filter values using a string." data-step="5"/>',scope:{valfilter:"="}}}),angular.module("ldv.table.taf",[]).directive("tripleActions",function(){return{restrict:"EA",transclude:!1,replace:!0,template:'<span class="dbpv-taf"><span ng-repeat="action in taf"><span triple-action="action" value="value" predicate="predicate" about="about"></span></span>',scope:{taf:"=tripleActions",about:"=",predicate:"=",value:"="},controller:"TripleActionsCtrl"}}).controller("TripleActionsCtrl",["$scope",function(a){void 0!==a.taf}]).directive("tripleAction",function(){return{restrict:"EA",transclude:!1,replace:!0,scope:{action:"=tripleAction",about:"=",predicate:"=",value:"="},template:'<span><a href="javascript:void(0);" title="{{action.description}}" ng-click="action.execute(about, predicate, value);"> <span ng-bind-html-unsafe="action.display();"></span> </a></span>'}}),angular.module("ldv.ui.classInstances",["ldv.table.displayNode","ldv.ui.pagination","ui.jassa"]).directive("dbpvClassInstances",function(){return{restrict:"EA",replace:!0,scope:{about:"=",primarylang:"=",fallbacklang:"="},template:'<div id="class-instances" ng-show="showInstances"><div id="facetblock"><div facet-tree sparql-service="sparqlService" facet-tree-config="facetTreeConfig" select="selectFacet(path)"></div><div facet-value-list sparql-service="sparqlService" facet-tree-config="facetTreeConfig" path="path"></div>	<div constraint-list sparql-service="sparqlService" facet-tree-config="facetTreeConfig"></div></div><div id="instance-block" class="top-block"><div id="class-instances-top">Some instances of this class:</div><div id="class-instances"><div class="class-instance-i" dbpv-pagination page="page" total="total" perpage="perpage"></div><div ng-repeat="instance in instances"><div class="class-instance-i"><div class="class-instance"><div display-node node="instance" primarylang="primarylang" fallbacklang="fallbacklang"></div></div></div></div></div></div></div>',controller:"DbpvClassInstancesCtrl"}}).controller("DbpvClassInstancesCtrl",["$scope","Entity","UrlService",function(a,b,c){{var d=Jassa.service;Jassa.facete,new d.SparqlServiceFactoryDefault}a.sparqlService=new d.SparqlServiceHttp(c.endpoint(),c.endpointgraph()),a.facetTreeConfig=new Jassa.facete.FacetTreeConfig;var e=Jassa.rdf.NodeFactory.createVar("s"),f=Jassa.rdf.NodeFactory.createUri(a.about.uri),g=new Jassa.sparql.ElementTriplesBlock([new Jassa.rdf.Triple(e,Jassa.vocab.rdf.type,f)]),h=new Jassa.facete.Concept(g,e);a.facetTreeConfig.getFacetConfig().setBaseConcept(h),a.path=null,a.selectFacet=function(b){a.path=b},a.showPaginator=!0,a.perpage=15,a.page=0,a.total=0,a.criteria="?x <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <"+a.about.uri+">",a.getInstanceNumber=function(){a.showInstances&&b.loadReverseValuesCount(a.about,{uri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}).then(function(b){a.total=b[0].literalLabel.val})},LDViewer.showClassInstances=function(){a.showInstances=!0,a.getInstanceNumber()},a.loadInstances=function(){a.showInstances&&b.loadReverseValues(a.about,{uri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"},a.perpage,a.offset).then(function(b){a.instances=b})},a.$watch("page",function(){a.offset=a.page*a.perpage,a.loadInstances()}),a.$watch("total",function(){a.loadInstances()})}]),angular.module("ldv.ui.custom",[]).directive("dbpvTop",["$compile",function(a){return{link:function(b,c){b.goHome=function(){return $("body,html").animate({scrollTop:0},800),!1},c.html("<a href='javascript:void(0);' ng-click='goHome();'><span class='glyphicon glyphicon-chevron-up'></span></a>"),a(c.contents())(b),$(window).scrollTop()<150&&c.css("visibility","hidden"),$(window).scroll(function(){$(window).scrollTop()>150?c.css("visibility","visible"):c.css("visibility","hidden")})}}}]).directive("ngEnter",function(){return function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.ngEnter)}),b.preventDefault())})}}).directive("sameOffset",function(){return{link:function(a,b,c){var d=c.sameOffset;a.$watch(function(){return angular.element(d).offset().top},function(a){b.css("top",a)})}}}).directive("stupidScroll",["$window",function(){return{link:function(){}}}]).directive("smartScroll",["$window",function(){return{link:function(a,b,c){var d=0,e=0,e=c.smartScroll;void 0!==e&&b.offset({top:e,left:b.offset().left}),$(window).scroll(function(){void 0===e&&(e=c.smartScroll),void 0===e&&(e=b.attr("smartscrollinit")),void 0===e&&(e=0);var a=$(window).scrollTop()>d;d=$(window).scrollTop();var f=$(window).height(),g=$(window).scrollTop(),h=b.height(),i=b.offset().top,j=b.offset().left,k=g-i,l=i+h-g-f,m=g;if(h>f)if(a){if(k>0){var n=l+k;m=0>l?g-n:void 0}}else console.log(k),m=0>k?g:void 0;void 0!==m&&b.offset(m>e?{top:m,left:j}:{top:e,left:j})})}}}]).directive("smartSlide",function(){return{link:function(a,b,c){var d=c.id,e=$("#"+d+" "+c.smartSlideContent).css("right");$("#"+d+" "+c.smartSlideContent).hide(),$("#"+d+" "+c.smartSlide).click(function(){var a=$("#"+d+" "+c.smartSlideContent).css("right"),a=a.substr(0,a.length-2);0>a?($("#"+d+" "+c.smartSlideContent).show(),$("#"+d+" "+c.smartSlideContent).animate({right:"0px"},200)):$("#"+d+" "+c.smartSlideContent).animate({right:e},200,function(){$("#"+d+" "+c.smartSlideContent).hide()})})}}}).directive("smartSlider",function(){return{restrict:"EA",transclude:!1,replace:!0,scope:{content:"=",title:"=",state:"="},controller:"SmartSliderCtrl",template:'<div id="smartSlider"><div id="smartSlider-title">{{title}}</div><div id="smartSlider-content" compile="content"></div></div>'}}).controller("SmartSliderCtrl",["$scope",function(a){a.currentState=!1,a.$watch("state",function(b){b!=a.currentState&&a.updateSlider()}),a.updateSlider=function(){1==a.state&&0==a.currentState?a.showSlider():(a.state=!1)&&a.hideSlider()},a.showSlider=function(){},a.hideSlider=function(){}}]),angular.module("ldv.ui.disclaimer",[]).directive("dbpvDisclaimer",function(){return{restrict:"EA",replace:!0,scope:{about:"=",localgraph:"="},controller:"DbpvDisclaimerCtrl",template:'<div id="ft_ccbysa" ng-show="disclaimed">	This content was extracted from <a href="http://www.wikipedia.org">Wikipedia</a> and is licensed under the <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>	</br>	The content on this page was created by the <a href="{{wikipage.history}}">editors of the Wikipedia page {{wikipage.title}}</a>.      </div>'}}).controller("DbpvDisclaimerCtrl",["$scope",function(a){console.log("disclaimer"),a.suffix="/resource/",a.disclaimed=!1,LDViewer.setFooterWikipage=function(b){a.wikipage=b},-1!=a.about.uri.indexOf(a.localgraph+a.suffix)&&(a.about.title=a.about.uri.slice((a.localgraph+a.suffix).length,a.about.uri.length),a.about.datalink="/data/"+a.about.title,a.disclaimed=!0)}]);var tableUI=angular.module("ldv.ui.filters",[]);tableUI.directive("predicateFilter",function(){return{restrict:"EA",transclude:!1,replace:!0,template:'<input class="form-control dbpv-input dbpv-filter dbpv-filter-pred" ng-model="predfilter" data-intro="Filter predicates using a string." data-step="4"/>',scope:{predfilter:"="}}}),tableUI.directive("valueFilter",function(){return{restrict:"EA",transclude:!1,replace:!0,template:'<input class="form-control dbpv-input dbpv-filter dbpv-filter-val" ng-model="valfilter" data-intro="Filter values using a string." data-step="5"/>',scope:{valfilter:"="}}}),angular.module("ldv.ui.languageSwitch",["ldv.services.languages"]).directive("dbpvLanguageSwitch",function(){return{restrict:"EA",transclude:!1,replace:!0,scope:{primarylang:"=",languages:"="},controller:"DbpvLanguageSwitchCtrl",template:'<div data-intro="Filter by language." data-step="2" class="input-group-btn">					<button type="button" class="btn btn-default dropdown-toggle language-button" data-toggle="dropdown"><span style="font-size:0.8em;" class="glyphicon glyphicon-globe"></span> <span ng-bind="getNativeName(primarylanguage);"></span></button>				        <ul class="dropdown-menu">					  <li ng-repeat="(code, names) in availableLanguages"><a href="javascript:void(0);" ng-click="selectLanguage(code);">{{names.nativeName}}</a></li>					  <li class="divider"></li>					  <li class="unavailable" ng-repeat="(code, names) in restLanguages()"><a href="javascript:void(0);" ng-click="selectLanguage(code);">{{names.nativeName}}</a></li>					</ul>				</div>'}}).controller("DbpvLanguageSwitchCtrl",["$scope","LanguageService",function(a,b){void 0===$.cookie("dbpv_primary_lang")&&$.cookie("dbpv_primary_lang",a.primarylang,{expires:90,path:"/"}),a.primarylanguage=$.cookie("dbpv_primary_lang"),a.availableLanguages={},a.newAvailableLanguage=function(c){a.availableLanguages[c]=b.languages[c]},LDViewer.newAvailableLanguage=a.newAvailableLanguage,a.restLanguages=function(){var c={};for(var d in b.languages)d in a.availableLanguages||(c[d]=b.languages[d]);return c},a.$watch("primarylanguage",function(b){if(a.primarylang=b,$.cookie("dbpv_primary_lang",b),!(b in a.availableLanguages)){var c=!1;for(var d in a.availableLanguages){c=!0;break}c&&LDViewer.addNotification("There are no values in the chosen language for this entity",5e3)}}),a.addNoti=function(b,c){a.$broadcast("show notification",{text:b,timeout:c})},a.getNativeName=function(a){return b.languages[a].nativeName},a.selectLanguage=function(b){a.primarylanguage=b}}]),angular.module("ldv.ui.legend",[]).directive("dbpvLegend",function(){return{restrict:"EA",transclude:!1,replace:!0,scope:{},template:'<div id="legend" ><h2 style="margin-top:0;">Legend</h2>	<div class="container" id="legends">		<div class="legend" ng-repeat="legend in legends">			<div class="name">{{legend.name}}</div>			<div class="description">{{legend.description}}</div>			<div class="line" ng-repeat="line in legend.lines">				<span ng-bind-html-unsafe="line.icon"></span> : {{line.text}}			</div>		</div>	</div></div>',controller:"DbpvLegendCtrl"}
}).controller("DbpvLegendCtrl",["$scope","TafService",function(a,b){a.legends=[],a.addLegend=function(b){a.legends.push(b)},a.actions=b.getActions();for(var c=0;c<a.actions.length;c++){var d=a.actions[c];"undefined"!=typeof d.legendize&&a.addLegend(d.legendize())}}]),angular.module("ldv.ui.lookup",["ldv.services.search","ui.bootstrap"]).directive("dbpvLookup",function(){return{restrict:"EA",transclude:!1,replace:!0,controller:"DbpvLookupCtrl",scope:{localprefix:"=",lookupgraph:"=",lookupendpoint:"="},template:'<input data-intro="Search for entities." data-step="1" type="text" typeahead="result as result.l_label for result in lookup()" typeahead-wait-ms="800" typeahead-template-url="tpl/typeahead-custom.html" placeholder="Search..." class="form-control entity-search dbpv-input" ng-model="querie"/>'}}).controller("DbpvLookupCtrl",["$scope","$http","$timeout","Search","$templateCache",function(a,b,c,d,e){e.put("tpl/typeahead-custom.html",'<a><span bind-html-unsafe="match.label|typeaheadHighlight:query"></span><span class="typeahead-url"> ({{match.model.url}})</span></a>');a.results=[],a.$watch("querie",function(b){void 0===b||""==b?a.results=[]:void 0!==b.url&&b.url.substr(0,a.lookupgraph.length)==a.lookupgraph&&(b.url=b.url.substr(a.lookupgraph.length),window.location=void 0!==a.localprefix&&""!=a.localprefix?a.localprefix+b.url:b.url)}),a.lookup=function(){return void 0!==a.querie&&""!=a.querie?d.search(a.querie,10).then(function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],e={type:"uri",l_label:d.label.literalLabel.lex,url:d.uri.uri};b.push(e)}return console.log(b),b}):void(a.results=[])}}]),angular.module("ldv.ui.notifications",[]).directive("dbpvNotifications",function(){return{restrict:"EA",transclude:!1,replace:!0,scope:{},template:'			<div id="notifications">				<div class="notification" ng-click="removeNotification(notification);" ng-repeat="notification in notifications">					<span class="text">{{notification.text}}</span>				</div>			</div>',controller:"DbpvNotificationsCtrl"}}).controller("DbpvNotificationsCtrl",["$scope","$timeout",function(a,b){LDViewer.addNotification=function(b,c){a.addNotification(b,c)},a.notifications=[],a.$on("show notification",function(b,c){a.addNotification(c.text,c.timeout)}),a.addNotification=function(c,d){var e={text:c};void 0!==d&&(e.timeout=b(function(){a.removeNotification(e)},d)),a.notifications.push(e)},a.removeNotification=function(c){for(var d=0;d<a.notifications.length;d++)c==a.notifications[d]&&(a.notifications.splice(d,1),void 0!==c.timeout&&b.cancel(c.timeout))}}]);var pagination=angular.module("ldv.ui.pagination",["ldv.ui.custom"]);pagination.directive("dbpvPagination",function(){return{restrict:"EA",replace:!0,transclude:!1,scope:{page:"=",total:"=",perpage:"=",onSelect:"&"},template:'<div class="dbpv-paginator" ng-show="showPaginator">	<div ng-show="showLeftNav">		<button class="btn btn-block-primary btn-small btn-show-left dbpv-btn" ng-click="onShowLeft()">PREVIOUS		</button>	</div>	<div ng-show="!showLeftNav">		<div class="btn-show-left-placeholder">PREVIOUS		</div>	</div>	<div ng-show="showPaginator">	<div class="rev-paginator">PAGE: 		<input class="form-control dbpv-input dbpv-filter rev-paginator-page" ng-model="pagedis" ng-enter="changePage()"/>/{{pages+1}} 		<button class="btn dbpv-btn btn-block-primary btn-small" ng-click="changePage()">GO		</button>	</div></div><div ng-show="showRightNav"><button class="btn btn-block-primary btn-small btn-show-right dbpv-btn" ng-click="onShowRight()">NEXT		</button>	</div>	<div ng-show="!showRightNav">		<div class="btn-show-right-placeholder">NEXT		</div>	</div></div>',controller:"DbpvPaginationCtrl"}}).controller("DbpvPaginationCtrl",["$scope",function(a){a.init=function(){a.pages=Math.floor(a.total/a.perpage)},a.$watch("page",function(){a.pagedis=a.page+1}),a.$watch("total",function(){a.init(),a.checkVisibility()}),a.onShowRight=function(){var b=a.page+1;b<=a.pages&&(a.page=b,a.onPageChange())},a.onShowLeft=function(){var b=a.page-1;b>=0&&(a.page=b,a.onPageChange())},a.changePage=function(){a.page=a.pagedis-1,a.page>a.pages?a.page=a.pages:a.page<0&&(a.page=0),a.onPageChange()},a.onPageChange=function(){a.checkVisibility(),a.onSelect(a.page)},a.checkVisibility=function(){a.total>0&&a.perpage<=a.total&&(a.showPaginator=!0,a.showRightNav=!0,a.showLeftNav=!0),a.page==a.pages&&(a.showRightNav=!1),0==a.page&&(a.showLeftNav=!1)},a.init(),a.checkVisibility()}]),angular.module("ldv.preview",["ldv.filters"]).directive("dbpvPreview",function(){return{restrict:"EA",transclude:!1,replace:!1,controller:"DbpvPreviewCtrl",link:function(a,b,c){var d=void 0;d=c.dbpvPreview&&""!=c.dbpvPreview?c.dbpvPreview:a.node&&a.node.uri?a.node.uri:c.href,a.calll(d,b)}}}).controller("DbpvPreviewCtrl",["$scope","$timeout","$compile","Preview","UrlService",function(a,b,c,d,e){a.calll=function(b,c){c.bind("mouseenter",function(){a.onElementHover(b,c)}),c.bind("mouseleave",a.onElementUnhover)},a.populatePreview=function(a,b,c){c.previewSemaphore=1;var f=LDViewer.getConfig("previewMappings");for(var g in f)if(dbpv[g]instanceof Array)for(var h in f[g])b[g][h]=d.getProperty(a,f[g][h],c,e.localgraph(),e.endpoint());else b[g]=d.getProperty(a,f[g],c,e.localgraph(),e.endpoint())},a.onElementHover=function(d,f){a.to||(a.to=b(function(){void 0===a.dbpvp&&(a.dbpvp={}),a.dbpvp.position=f.offset(),a.dbpvp.position.top=a.dbpvp.position.top+f.height(),a.dbpvp.show=!0,d=e.defaultUri(d),a.populatePreview(d,a.dbpvp,a),f.after('<div id="dbpvpreview" style="position:absolute;top:{{dbpvp.position.top}}px;left:{{dbpvp.position.left}}px;" ><div id="dbpvpthumbnail">				<img ng-src="{{dbpvp.thumbnail[0].uri}}"></img>			</div><div id="dbpvptext">			<div id="dbpvplabel">				<span ng-repeat="value in dbpvp.label |languageFilter:primarylang:fallbacklang">					{{value.literalLabel.lex}}				</span>			</div>			<div id="dbpvpdescription">				<span ng-repeat="value in dbpvp.description |languageFilter:primarylang:fallbacklang">					{{value.literalLabel.lex}}				</span>			</div>			</div><div ng-repeat="(key, val) in dbpvp.properties">				<div id="dbpvpdescription">					<span ng-show="val.length>0">						{{key}}:						<a href="{{val[0].uri}}">							{{val[0].lex}}						</a>					</span>				</div>			</div><div id="loading" ng-show="previewSemaphore>0">			<center><img style="margin-bottom:15px;" src="/statics/css/ajax-loader.gif"></img></center>		</div></div>'),c(f.next())(a)},800))},a.$watch("dbpvp.properties",function(a){for(var b in a)for(var c=a[b],d=0;d<c.length;d++){var f=c[d],g=e.prefixify(f.uri);f.lex=void 0!==g&&g.length>1?g[0]+":"+g[1]:f.uri}},!0),a.onElementUnhover=function(){$("#dbpvpreview").remove(),a.to&&(b.cancel(a.to),a.to=void 0)}}]).directive("dbpvPreviewBox",function(){return{restrict:"EA",transclude:!1,replace:!0,template:'<div ng-show="dbpvp.show" id="dbpvpreview" style="position:absolute;top:{{dbpvp.top}}px;left:{{dbpvp.left}}px;" ng-mouseenter="previewHover()" ng-mouseleave="previewUnhover()"><div id="dbpvpthumbnail">				<img ng-src="{{dbpvp.thumbnail[0].value}}"></img			</div><div id="dbpvptext">			<div id="dbpvplabel">				<span ng-repeat="value in dbpvp.label |languageFilter:primarylang:fallbacklang">					{{value.value}}				</span>			</div>			<div id="dbpvpdescription">				<span ng-repeat="value in dbpvp.description |languageFilter:primarylang:fallbacklang">					{{value.value}}				</span>			</div>			</div><div ng-repeat="(key, val) in dbpvp.properties">				<div id="dbpvpdescription">					<span ng-show="val.length>0">						{{key}}:						<a href="{{val.uri}}">							{{val.lex}}						</a>					</span>				</div>			</div>		</div>',scope:{dbpvp:"=",primarylang:"=",fallbacklang:"="}}}),angular.module("ldv.ui.relationInstances",["ldv.table.displayNode"]).directive("dbpvRelationInstances",function(){return{restrict:"EA",replace:!0,scope:{about:"=",primarylang:"=",fallbacklang:"="},template:'<div id="relation-instances" class="top-block" ng-show="showInstances"><div id="relation-instances-top">Some relation instances</div><div id="relation-instances"><div ng-repeat="instance in instances"><div class="relation-instance"><div class="relation-instance-subject"><div display-node node="instance.subj" primarylang="primarylang" fallbacklang="fallbacklang"></div></div><div class="relation-instance-object"><div display-node node="instance.obj" primarylang="primarylang" fallbacklang="fallbacklang"></div></div></div></div></div></div>',controller:"DbpvRelationInstancesCtrl"}}).controller("DbpvRelationInstancesCtrl",["$scope","Entity",function(a,b){LDViewer.showRelationInstances=function(){a.showInstances=!0,console.log("getting instances"),a.loadInstances(25)},a.loadInstances=function(c){b.relationInstances(a.about.uri,c).then(function(b){a.instances=b})}}]),angular.module("ldv.ui.settings",[]).directive("dbpvSettings",function(){return{restrict:"EA",replace:!0,transclude:!1,scope:{},template:'<div id="dbpv-settings"><h2 style="margin-top:0;">Settings:</h2><div ng-repeat="setting in settings"><div class="form-group" ng-switch="setting.type"><div ng-switch-when="string"><label>{{setting.label}}</label><input type="text" class="form-control" ng-model="setting.value"/></div><div ng-switch-when="boolean" class="checkbox"><label><input type="checkbox" ng-model="setting.value">{{setting.label}}</label></div></div></div><button class="btn btn-small btn-primary" ng-click="refresh()">SAVE SETTINGS & REFRESH</button><button class="btn btn-small btn-danger" ng-click="reset()" style="float:right">RESET</button></div>',controller:"DbpvSettingsController"}}).controller("DbpvSettingsController",["$rootScope","$scope",function(a,b){b.settingsmap=[{id:"localprefix",label:"Local Prefix",type:"string",prio:0},{id:"localgraph",label:"Graph URI",type:"string",prio:1},{id:"endpoint",label:"Endpoint URI",type:"string",prio:2},{id:"fallbacklang",label:"Fallback Language",type:"lang",prio:0},{id:"encodegraph",label:"Encode Graph",type:"boolean",prio:5},{id:"godmode",label:"GraffHopper",type:"boolean",prio:6},{id:"showLabels",label:"Show Labels",type:"boolean",prio:4}],b.settings=[],b.reset=function(){var a=$.cookie();for(var c in a){var d="dbpv_setting_";c.slice(0,d.length)==d&&$.removeCookie(c)}b.refresh()},b.refresh=function(){for(var a=0;a<b.settings.length;a++)b.saveInRoot(b.settings[a])&&b.saveAsCookie(b.settings[a]);window.location.reload(!1)},b.makeSettings=function(){for(var c=0;c<b.settingsmap.length;c++){var d=b.settingsmap[c];if(d.prio>0){var e=b.loadFromCookies(d.id);if(e?(d.value=e,"boolean"==d.type&&(d.value="true"==d.value?!0:!1),b.saveInRoot(d)):d.value=a[d.id],void 0!==d.value){for(var f=!1,g=0;g<b.settings.length;g++)if(b.settings[g].prio>d.prio){b.settings.splice(g,0,d),f=!0;break}f||b.settings.push(d)}}}console.log(JSON.stringify(b.settings))},b.saveInRoot=function(b){return void 0!==a[b.id]&&b.value!=a[b.id]?(a[b.id]=b.value,!0):!1},b.watchSettings=function(){b.$watch("settings",function(a){for(var c=0;c<a.length;c++)b.saveInRoot(a[c])&&b.saveAsCookie(a[c])},!0)},b.saveAsCookie=function(a){a.id&&void 0!==a.value&&$.cookie("dbpv_setting_"+a.id,a.value,{expires:90,path:"/"})},b.loadFromCookies=function(a){return void 0!==$.cookie("dbpv_setting_"+a)?$.cookie("dbpv_setting_"+a):void 0},b.makeSettings()}]),angular.module("ldv.ui.shortcuts",["ldv.ui.custom","ldv.services.UrlService","ldv.ui.custom"]).directive("shortcutBox",function(){return{restrict:"EA",transclude:!1,replace:!0,scope:{},template:'<div id="shortcutswrapper">						<div id="shortcuts" stupid-scroll="100" ng-show="shortcuts.length>0" style="top:100px;">							<div class="shortcut-home" dbpv-top></div>							<div class="shortcutscuts" data-intro="These are shortcuts to some basic entity properties." data-step="6">								<div class="shortcut" ng-repeat="cut in shortcuts">									<span shortcut="cut.url" shortcut-label="cut.label"></span>								</div>							</div>							<div class="shortcutscuts"></div>						</div>					</div>',controller:"ShortcutBoxCtrl"}}).controller("ShortcutBoxCtrl",["$scope",function(a){a.shortcuts=[],LDViewer.addShortcut=function(b,c,d){for(var e={url:b,label:c,prio:d},f=!1,g=!1,h=0;h<a.shortcuts.length;h++)if(b==a.shortcuts[h].url){g=!0;break}if(!g){for(var h=0;h<a.shortcuts.length;h++)if(a.shortcuts[h].prio<e.prio){a.shortcuts.splice(h,0,e),f=!0;break}0!=a.shortcuts.length&&f||a.shortcuts.push(e)}}}]).directive("shortcut",["$compile","UrlService",function(a,b){return{restrict:"EA",link:function(c,d,e){var f=c.$eval(e.shortcut),g=c.$eval(e.shortcutLabel);c.useShortcut=function(){f=b.makeUrl(f).uri;var a=$("a[href='"+f+"']");return void 0!==a?(a=parseInt(a.offset().top)-10,$("body,html").animate({scrollTop:a},100),!1):void 0},d.html("<a href='javascript:void(0);' ng-click='useShortcut();'>"+g+"</a>"),a(d.contents())(c)}}}]),angular.module("ldv.ui.status",[]).directive("dbpvStatus",function(){return{restrict:"EA",transclude:!1,replace:!0,scope:{},controller:"DbpvStatusCtrl",template:'<div id="dbpv-status"><div ng-repeat="status in stasi" class="status-item"><span ng-bind-html-unsafe="status.icon" ng-click="removeStatus(status)"></span><span>{{status.text}}</span></div></div>'}}).controller("DbpvStatusCtrl",["$scope","$rootScope",function(a){a.stasi=[],a.kgb=0,a.stasiSemaphore=0,a.stasiChange=0,a.addStatus=function(b,c){if(b){var d={text:b,icon:c};return a.getStatusHandler(d)}},a.getStatusHandler=function(b){return a.stasi.push(b),a.kgb++,a.stasiChange++,b.id=a.kgb,console.log("New status id :"+b.id),{"delete":function(){a.removeStatus(b)}}},LDViewer.addStatus=function(b,c){return a.addStatus(b,c)},a.removeStatus=function(b){if(b&&b.text&&b.id){console.log("Removing status with id :"+b.id),a.stasiChange++,a.stasiSemaphore++;for(var c=0;c<a.stasi.length;){if(a.stasi[c].id==b.id){a.stasi[c].delete=!0;break}c++}a.stasiSemaphore--}},a.$watch("stasiChange",function(){var b=a.stasiSemaphore;if(console.log("Stasi semaphore :"+b),0==b)for(var c=0;c<a.stasi.length;)a.stasi[c].delete&&(a.stasi.splice(c,1),c--),c++})}]),angular.module("ldv.ui.survey",[]).directive("dbpvSurvey",function(){return{restrict:"EA",replace:!0,scope:{},template:'<div id="survey" ng-show="showSurvey"><img class="btn-survey" src="/statics/surveyrequest.png" ng-click="surveyClicked()"/></div>',controller:"DbpvSurveyCtrl"}}).controller("DbpvSurveyCtrl",["$scope",function(a){a.showSurvey="true"==$.cookie("dbpv_survey")?!1:!0,a.surveyClicked=function(){window.open("https://www.surveymonkey.com/s/N72M2JP"),a.showSurvey=!1,$.cookie("dbpv_survey","true",{expires:90,path:"/"})}}]),angular.module("ldv.ui.topbar",["ldv.ui.languageSwitch","ldv.compile","ldv.ui.lookup","ldv.ui.settings","ldv.ui.legend"]).directive("dbpvTopbar",function(){return{restrict:"EA",replace:!0,scope:{logo:"=",primarylang:"=",languages:"=",lookupendpoint:"=",lookupgraph:"=",localgraph:"=",localprefix:"="},template:'<div class="navbar top-block"> 		<div class="dbp-logo">			<img ng-src="{{logo}}"></img> 		</div> 		<div id="searchbar">	  			<div class="input-group" id="topstuff">				<span class="input-group-addon glyphicon glyphicon-search"></span>				<div dbpv-lookup lookupgraph="lookupgraph" lookupendpoint="lookupendpoint" localprefix="localprefix"></div> 				<span class="input-group-addon addon-right" title="This is the Named Graph">@ {{localgraph}}</span>				<div dbpv-language-switch primarylang="primarylang" languages="languages"></div>			</div>					</div> <div dbpv-topbuttons></div></div>'}}).directive("dbpvTopbuttons",function(){return{restrict:"EA",replace:!0,scope:{},template:'<div id="dbpv-topbuttons"><span ng-repeat="button in buttons"><div class="dbpv-topbutton {{buttonActive(button)}}" id="{{button.css-id}}" title="{{button.description}}" ng-click="buttonClicked(button)" compile="button.display"></div></span><div ng-show="showContent" class="dbpv-rightcol top-block" compile="content"></div></div>',controller:"DbpvTopbuttonsCtrl"}}).controller("DbpvTopbuttonsCtrl",["$scope",function(a){a.buttons=[],a.content="",a.showContent=!1,a.activeButton=null,a.buttons=[{id:"settings",description:"Change Settings","css-id":"dbpv-settingsbutton",display:'<span class="glyphicon glyphicon-cog"></span>',execute:function(){a.content="<div dbpv-settings></div>",a.showContent=!0},nexecute:function(){a.content="",a.showContent=!1}},{id:"tour",description:"Take a tour","css-id":"dbpv-tourbutton",display:'<span class="glyphicon glyphicon-bookmark"></span>',execute:function(){var b=introJs().setOptions({skipLabel:"",nextLabel:"<span class='glyphicon glyphicon-arrow-right'></span>",prevLabel:"<span class='glyphicon glyphicon-arrow-left'></span>"});a.inactivateActiveButton(),b.start()}},{id:"legend",description:"View Legend","css-id":"dbpv-legendbutton",display:'<span class="glyphicon glyphicon-book"></span>',execute:function(){a.content="<div dbpv-legend></div>",a.showContent=!0},nexecute:function(){a.content="",a.showContent=!1}}],a.buttonClicked=function(b){a.activeButton==b?a.inactivateActiveButton():(a.activeButton&&a.activeButton.nexecute&&a.activeButton.nexecute(),a.activeButton=b,b.execute&&b.execute())},a.inactivateActiveButton=function(){a.activeButton&&(a.activeButton.nexecute&&a.activeButton.nexecute(),a.activeButton=null)},a.buttonActive=function(b){return a.activeButton==b?"active":"inactive"}}]),angular.module("ldv.ui",["ldv.ui.classInstances","ldv.ui.disclaimer","ldv.ui.topbar","ldv.ui.relationInstances","ldv.ui.status","ldv.ui.shortcuts"]);